import{d as $,Q as N,q as U,b as m,e as I,w as R,j as r,u as s,v as i,B as _,F as J,X as T,f as S,x as g,k as n}from"./vue.esm-bundler-da3dfd31.js";import{u as j,U as W}from"./useTheme-eec4b019.js";import{M as q}from"./index-febd9083.js";import{I as L}from"./index-b4575248.js";import{u as O}from"./vue-i18n.runtime-54aa6b03.js";import{m as P}from"./index-9fe1cf39.js";import{C as Q}from"./KeyCode-9b05785e.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-router-212c06c4.js";import"./extends-98964cd2.js";import"./_baseSet-de153ea0.js";import"./_toKey-6cc18de3.js";import"./index-31244240.js";import"./slide-ff6c039b.js";import"./isArrayLikeObject-523edb65.js";import"./Accordion-1ff785b2.js";import"./_commonjsHelpers-de833af9.js";import"./colors-099fe84d.js";import"./ClockCircleOutlined-566f9eed.js";import"./pickAttrs-d6f9a41a.js";import"./index-f0aafce9.js";import"./shallowequal-23878baf.js";import"./collapseMotion-6307b6e4.js";import"./index-6cf4e6ab.js";import"./iframe-8ae88575.js";import"../sb-preview/runtime.js";import"./Button-041be21e.js";import"./DropdownButton-0331ed8d.js";import"./ExclamationCircleFilled-da22edd1.js";const z={class:"invite-member-form-container"},A={key:0,class:"text-wrapper"},G={class:"form-wrapper"},H={key:0,style:{color:"red","margin-left":"10px"}},K={class:"tags-wrapper"},Y={class:"text"},Z=["onClick"],ee={class:"input-wrapper"},te={class:"input-box"},se={key:1,class:"jump-wrapper"},b=$({__name:"InviteMemberForm",props:{isShowDescription:{type:Boolean,default:!0},isShowJump:{type:Boolean,default:!0}},setup(k,{expose:F}){const C=k;N(t=>({"6ad563dc":x.value.borderColor}));const{t:c}=O(),a=j(),{getFormValues:V,getStepType:u,getWorkspace:h}=U(a),l=m(!1),w=m(""),p=m(""),y=m(),d=I(()=>[...V.value.inviteEmails]),x=I(()=>({borderColor:l.value?"#ff4d4f":"#d9d9d9"}));(async()=>u.value===null&&a.initFormValueInviteEmails())();const v=async t=>{const e=t.target.value;try{if(!e)return;W.Validate.isEmail(e)?d.value.includes(e)?(f(c("message.validate.checkDuplicatedEmail")),console.log("step",u.value)):(u.value===null&&D(e),p.value="",a.pushFormValueInviteEmails(e.trim()),E()):f(c("message.validate.checkEmailForm"))}catch{P.error(c("message.validate.reTry"))}},D=async t=>{try{if(h.value){const{data:{exist:e}}=await q.checkDuplicatedEmail(h.value.workspaceId,{inviteEmail:t});if(e)return f("이미 이 워크스페이스에 존재합니다.")}}catch(e){console.log(e)}},M=()=>{a.initFormValueInviteEmails()},B=t=>{a.removeFormValueInviteEmails(t)},f=t=>{w.value=t,l.value=!0,a.setNextBtnDisabled(!0)},E=()=>{l.value=!1,a.setNextBtnDisabled(!1)};return R(p,()=>{p.value.length||E()}),F({isError:l,tags:d,onInputEnter:v,onInitInviteEmails:M}),(t,e)=>(n(),r("div",z,[C.isShowDescription?(n(),r("div",A,[s("h1",null,i(t.$t("page.workspace.createStep3Tit")),1),s("p",null,i(t.$t("page.workspace.createStep3Desc")),1)])):_("",!0),s("div",G,[s("small",null,i(t.$t("page.workspace.createStep3Info")),1),l.value?(n(),r("small",H,i(w.value),1)):_("",!0),s("div",{class:"select-wrapper",onClick:e[1]||(e[1]=o=>y.value.focus())},[s("div",K,[(n(!0),r(J,null,T(d.value,o=>(n(),r("div",{key:o,class:"tag"},[s("span",Y,i(o),1),s("span",{class:"icon",onClick:ae=>B(o)},[S(g(Q))],8,Z)]))),128))]),s("div",ee,[s("div",te,[S(g(L),{ref_key:"inputRef",ref:y,class:"input",placeholder:t.$t("message.validate.checkEmail"),value:p.value,"onUpdate:value":e[0]||(e[0]=o=>p.value=o),onPressEnter:v,onFocusout:v},null,8,["placeholder","value"])])])]),k.isShowJump?(n(),r("div",se,[s("span",{class:"jump",onClick:e[2]||(e[2]=o=>g(a).nextCurrentStep())},i(t.$t("page.workspace.inviteStepJump")),1)])):_("",!0)])]))}});const $e=X(b,[["__scopeId","data-v-5d2a5f18"]]);b.__docgenInfo={exportName:"default",displayName:"InviteMemberForm",description:"",tags:{},expose:[{name:"isError"},{name:"tags"},{name:"onInputEnter"},{name:"onInitInviteEmails"}],props:[{name:"isShowDescription",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"isShowJump",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/workspace/components/create/InviteMemberForm.vue"]};export{$e as default};
