import{_ as H}from"./iframe-8ae88575.js";import{_ as Q}from"./Button-041be21e.js";import{d as W,b as k,m as R,y as n,x as e,k as I,u as g,f as o,v as U,e as te,r as ae,j as z,z as K,a6 as ne,h as se,a9 as j,B as le,F as re,X as ce,A as pe}from"./vue.esm-bundler-da3dfd31.js";import{u as Y}from"./useTheme-eec4b019.js";import{M as T}from"./index-e5788dd4.js";import{P as ie,D as me}from"./DynamicTable-603a7f8e.js";import"./SvgIcon-db9b006f.js";import{M as ue}from"./Modal-827a1fd7.js";import{S as de}from"./SearchSelect-04b559f6.js";import{M as _e}from"./index-febd9083.js";import{_ as ge}from"./FormItemRest-1bf65526.js";import{I as N}from"./CustomInput-b10632ad.js";import{u as V}from"./vue-i18n.runtime-54aa6b03.js";import{c as A}from"./content-e5dcb2b1.js";import{M as X}from"./index-eb2d26d6.js";import{a as fe}from"./isArrayLikeObject-523edb65.js";import{F as q}from"./index-5df3ba7c.js";import{_ as ve,M as ke}from"./index-a0b3e6d9.js";import{D as ye}from"./DropdownButton-0331ed8d.js";import{M as be}from"./MoreOutlined-50d43014.js";import{C as De}from"./KeyCode-9b05785e.js";import{C as we}from"./index-f0aafce9.js";import{E as Ie,m as O}from"./index-9fe1cf39.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{d as xe}from"./Accordion-1ff785b2.js";import{_ as he,T as Ce}from"./index-ecf1c700.js";import{Q as Me}from"./QuestionCircleTwoTone-d157f255.js";import"../sb-preview/runtime.js";import"./index-31244240.js";import"./extends-98964cd2.js";import"./vue-router-212c06c4.js";import"./_baseSet-de153ea0.js";import"./_toKey-6cc18de3.js";import"./slide-ff6c039b.js";import"./index-b4575248.js";import"./pickAttrs-d6f9a41a.js";import"./colors-099fe84d.js";import"./_commonjsHelpers-de833af9.js";import"./index-6cf4e6ab.js";import"./BasicTable-d1256578.js";import"./omit-3709658d.js";import"./_flatRest-9379d133.js";import"./useTour-3e614e3a.js";import"./CardList-70ef427d.js";import"./css-1021bd93.js";import"./index-6b6b6228.js";import"./LeftOutlined-444c44d4.js";import"./SwapOutlined-d76ec9a6.js";import"./index-df5fee73.js";import"./eagerComputed-853093c5.js";import"./responsiveObserve-1261ffb7.js";import"./index-bf79754e.js";import"./ExclamationCircleFilled-da22edd1.js";import"./collapseMotion-6307b6e4.js";import"./index-e44b3b0d.js";import"./index-434e0d27.js";import"./useFlexGapSupport-42c61aa1.js";import"./styleChecker-86e19025.js";import"./index-e47c3f83.js";import"./CaretDownOutlined-6d1d12da.js";import"./debounce-7fedd673.js";import"./index-7cccea8d.js";import"./Col-72edfad4.js";import"./hasIn-c3b6575d.js";import"./_arrayIncludesWith-2f006ba6.js";import"./shallowequal-23878baf.js";import"./ClockCircleOutlined-566f9eed.js";import"./useRefs-6ca959ac.js";const Te={class:"invite-form-wrapper"},Se=g("br",null,null,-1),Ue={class:"title"},Z=W({__name:"GroupModalForm",setup(D,{expose:f}){const{t:r}=V(),{getWorkspaceId:c}=Y(),i=k({name:"",content:"",addUsers:[]}),y=k([]),x=async()=>{const{data:m}=await _e.getUserList(c);return m.workspaceUsers.content},S=m=>m.map(t=>({label:t==null?void 0:t.nickname,value:t==null?void 0:t.nickname,prefixImg:t==null?void 0:t.thumbnail.url,workspaceUserId:t==null?void 0:t.workspaceUserId}));return y.value.length||x().then(m=>{y.value=S(m)}).catch(m=>console.log(m)),f({getModalInfo:i.value}),(m,t)=>{const h=de;return I(),R(e(ge),null,{default:n(()=>[g("div",Te,[o(e(N),{value:i.value.name,"onUpdate:value":t[0]||(t[0]=_=>i.value.name=_),label:e(r)("page.manage.groupName")},null,8,["value","label"]),o(e(N),{value:i.value.content,"onUpdate:value":t[1]||(t[1]=_=>i.value.content=_),label:e(r)("page.manage.groupDescription")},null,8,["value","label"]),Se,g("h4",Ue,U(e(r)("page.manage.addUserToAGroup")),1),o(h,{modelValue:i.value.addUsers,"onUpdate:modelValue":t[2]||(t[2]=_=>i.value.addUsers=_),filterOption:!0,options:y.value,width:"100%"},null,8,["modelValue","options"])])]),_:1})}}});Z.__docgenInfo={exportName:"default",displayName:"GroupModalForm",description:"",tags:{},expose:[{name:"getModalInfo"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/GroupModalForm.vue"]};const Pe={class:"post-detail"},Re={style:{display:"flex",gap:"10px"}},$e={style:{display:"flex",gap:"10px"}},Be={class:"btn-wrapper"},ee=W({__name:"PostDetail",props:{data:{}},emits:["reload","close"],setup(D,{emit:f}){const r=D,{t:c}=V(),{Item:i}=q,{getWorkspaceId:y}=Y(),[x,S]=X.useModal(),m=A.R,t=k(m),h=te(()=>t.value===A.C||t.value===A.U),_=k(!1),w={Save:"Save",Delete:"Delete"},$={name:"",content:""},p=ae({post:$,clonePost:$});p.post={...r.data},p.clonePost=fe(r.data);const B=v=>{if(v===w.Save)return O.success(c("message.saveSuccess"),1);if(v===w.Delete)return O.success(c("message.deleteSuccess"),1)},E=()=>{_.value=!_.value},G=v=>{t.value=v},P=async()=>{const v={workspaceId:y,name:p.clonePost.name,content:p.clonePost.content};T.updateGroup(r.data.groupId,v).then(({success:s})=>{var a,l;s&&(C(),f("reload"),B(w.Save),p.post={...p.post,name:(a=p.clonePost)==null?void 0:a.name,content:(l=p.clonePost)==null?void 0:l.content})}).catch(s=>{console.log(s)})},C=()=>{G(m),E()},F=()=>{const v={groupId:[r.data.groupId]};T.removeGroup(y,v).then(({success:s})=>{s&&(f("reload"),f("close"),B(w.Delete))}).catch(s=>{console.log(s)})},L=()=>{x.confirm({title:c("message.modalDeleteCheck"),icon:se(Ie),okText:c("component.button.ok"),okType:"primary",cancelText:c("component.button.cancel"),onOk(){F()}})};return(v,s)=>{const a=ve,l=ke,M=ye,u=Q;return I(),z("div",Pe,[h.value?(I(),R(e(q),{key:1,layout:"horizontal",model:p},{default:n(()=>[o(e(i),null,{default:n(()=>[o(e(N),{value:p.clonePost.name,"onUpdate:value":s[3]||(s[3]=d=>p.clonePost.name=d),label:e(c)("page.manage.groupTitle")},null,8,["value","label"])]),_:1}),o(e(i),null,{default:n(()=>[o(e(N),{value:p.clonePost.content,"onUpdate:value":s[4]||(s[4]=d=>p.clonePost.content=d),label:e(c)("page.manage.groupContent")},null,8,["value","label"])]),_:1}),g("div",Be,[o(u,{onClick:C},{default:n(()=>[o(e(De))]),_:1}),o(u,{onClick:P,type:"primary"},{default:n(()=>[o(e(we))]),_:1})])]),_:1},8,["model"])):(I(),R(e(q),{key:0,class:"post-detail-read",layout:"horizontal"},{default:n(()=>[g("div",null,[o(e(i),{label:e(c)("page.manage.groupTitle")},{default:n(()=>{var d;return[K(U(((d=p.post)==null?void 0:d.name)??"-"),1)]}),_:1},8,["label"]),o(e(i),{label:e(c)("page.manage.groupContent")},{default:n(()=>{var d;return[K(U(((d=p.post)==null?void 0:d.content)??"-"),1)]}),_:1},8,["label"])]),o(M,{open:_.value,"onUpdate:open":s[2]||(s[2]=d=>_.value=d),trigger:["click"]},{overlay:n(()=>[o(l,null,{default:n(()=>[o(a,{key:"1",onClick:s[1]||(s[1]=d=>G(e(A).C))},{default:n(()=>[g("div",Re,[g("span",null,U(e(c)("common.postModify")),1)])]),_:1}),o(a,{key:"2",onClick:L},{default:n(()=>[g("div",$e,[g("span",null,U(e(c)("component.button.delete")),1)])]),_:1})]),_:1})]),default:n(()=>[g("a",{class:"ant-dropdown-link",onClick:s[0]||(s[0]=ne(()=>{},["prevent"]))},[o(e(be),{style:{"font-size":"18px"}})])]),_:1},8,["open"])]),_:1})),o(e(S))])}}});const Ge=J(ee,[["__scopeId","data-v-4b27da9c"]]);ee.__docgenInfo={exportName:"default",displayName:"PostDetail",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"intersection",elements:[{name:"PostType"},{name:"{ groupId: string }"}]}}],events:[{name:"reload"},{name:"close"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/PostDetail.vue"]};const Fe=()=>{const{t:D}=V();return[{title:`${D("page.manage.groupName")}`,dataIndex:"name",key:"name"},{title:`${D("page.manage.groupDescription")}`,dataIndex:"content",key:"content"},{title:`${D("common.createdAt")}`,dataIndex:"createdAt",key:"createdAt",customRender:({text:f})=>xe.unix(f).format("YYYY-MM-DD")},{title:`${D("common.status")}`,dataIndex:"status",key:"status",customRender:({value:f})=>f.label}]},Ae={class:"manage-group-container"},Ne={class:"detail-contents"},Oe={class:"tab-wrapper"},oe=W({__name:"index",setup(D){const f=k(),{t:r}=V(),c={Detail:{key:"Detail",title:r("common.detail"),component:j(()=>H(()=>import("./GroupDetail-aef39b27.js"),["./GroupDetail-aef39b27.js","./vue.esm-bundler-da3dfd31.js","./useTheme-eec4b019.js","./vue-router-212c06c4.js","./extends-98964cd2.js","./vue-i18n.runtime-54aa6b03.js","./_baseSet-de153ea0.js","./_toKey-6cc18de3.js","./index-31244240.js","./slide-ff6c039b.js","./isArrayLikeObject-523edb65.js","./index-b4575248.js","./index-f0aafce9.js","./KeyCode-9b05785e.js","./pickAttrs-d6f9a41a.js","./colors-099fe84d.js","./Accordion-1ff785b2.js","./_plugin-vue_export-helper-c27b6911.js","./_commonjsHelpers-de833af9.js","./ClockCircleOutlined-566f9eed.js","./shallowequal-23878baf.js","./collapseMotion-6307b6e4.js","./Accordion-0db05fe0.css","./index-6cf4e6ab.js","./iframe-8ae88575.js","./Button-041be21e.js","./Button-bb7a377a.css","./DropdownButton-0331ed8d.js","./index-9fe1cf39.js","./ExclamationCircleFilled-da22edd1.js","./useTheme-e51dbf9c.css","./index-e5788dd4.js","./ListItemMeta-2a8c86fc.js","./index-bf79754e.js","./index-df5fee73.js","./LeftOutlined-444c44d4.js","./eagerComputed-853093c5.js","./responsiveObserve-1261ffb7.js","./Col-72edfad4.js","./useFlexGapSupport-42c61aa1.js","./styleChecker-86e19025.js","./ListItemMeta-7e334fa6.css","./SearchSelect-04b559f6.js","./SvgIcon-db9b006f.js","./SvgIcon-c8f4c12a.css","./debounce-7fedd673.js","./SearchSelect-4cc22848.css","./index-eb2d26d6.js","./index-6b6b6228.js","./index-bbe486c9.js","./index-e44b3b0d.js","./index-f53e67c5.js","./index-a0b3e6d9.js","./_arrayIncludesWith-2f006ba6.js","./UserAddOutlined-bd8059f7.js","./MoreOutlined-50d43014.js","./GroupDetail-ba53a7d0.css"],import.meta.url))},History:{key:"History",title:r("page.manage.history"),component:j(()=>H(()=>import("./GroupTimeline-53f054bf.js"),["./GroupTimeline-53f054bf.js","./vue.esm-bundler-da3dfd31.js","./useTheme-eec4b019.js","./vue-router-212c06c4.js","./extends-98964cd2.js","./vue-i18n.runtime-54aa6b03.js","./_baseSet-de153ea0.js","./_toKey-6cc18de3.js","./index-31244240.js","./slide-ff6c039b.js","./isArrayLikeObject-523edb65.js","./index-b4575248.js","./index-f0aafce9.js","./KeyCode-9b05785e.js","./pickAttrs-d6f9a41a.js","./colors-099fe84d.js","./Accordion-1ff785b2.js","./_plugin-vue_export-helper-c27b6911.js","./_commonjsHelpers-de833af9.js","./ClockCircleOutlined-566f9eed.js","./shallowequal-23878baf.js","./collapseMotion-6307b6e4.js","./Accordion-0db05fe0.css","./index-6cf4e6ab.js","./iframe-8ae88575.js","./Button-041be21e.js","./Button-bb7a377a.css","./DropdownButton-0331ed8d.js","./index-9fe1cf39.js","./ExclamationCircleFilled-da22edd1.js","./useTheme-e51dbf9c.css","./index-e5788dd4.js","./index-9b7dca2f.js","./index-5b2aa10a.js","./index-d60115d6.css","./GroupTimeline-aac98a16.css"],import.meta.url))}},i=k(!1),y=k(c.Detail.key),x=k(!1),S=k(),m=k(),t=k(),{getWorkspaceId:h}=Y(),_=a=>{i.value=a},w=()=>{x.value=!x.value},$=()=>{y.value=c.Detail.key},p=async a=>await T.getGroupList(h,a),B=({posts:a})=>a,E=()=>T.getPageInfo(),G=()=>T.getSortableCodes(),P=()=>{var a;(a=f.value)==null||a.reload({isReset:!0})},C={Save:"Save",Delete:"Delete"},F=a=>{if(a===C.Save)return O.success(r("message.saveSuccess"),1);if(a===C.Delete)return O.success(r("message.deleteSuccess"),1)},L=a=>{m.value=a,_(!0),$()},v=async()=>{var a;try{const l=(a=t.value)==null?void 0:a.getModalInfo,M={...l,workspaceId:h,addUsers:l.addUsers.map(u=>({workspaceUserId:u.workspaceUserId,nickname:u.label}))};await T.createGroup(M).then(({success:u})=>{u&&(F(C.Save),P(),w())}).catch(u=>{console.log(u)})}catch(l){console.log(l)}},s=(a,l)=>{X.confirm({content:r("message.modalDeleteCheck"),icon:o(Me),onOk(){const M={groupId:l};T.removeGroup(h,M).then(({success:u})=>{u&&(P(),setTimeout(()=>{F(C.Delete)},300))}).catch(u=>console.log(u))}})};return(a,l)=>{const M=Q,u=he,d=Ce;return I(),z("div",Ae,[o(e(me),{ref_key:"dynamicTableRef",ref:f,openDetail:i.value,"onUpdate:openDetail":l[2]||(l[2]=b=>i.value=b),"row-key":"groupId",columns:e(Fe)(),"data-request":p,"column-request":G,"filter-request":E,"data-callback":B,showRegist:!1,phText:a.$t("component.ph.groupSearchPh"),onRowClick:L,onRowDelete:s},{tableBtns:n(()=>[o(M,{label:e(r)("component.button.registration"),size:"middle",onClick:w},{icon:n(()=>[o(e(ie))]),_:1},8,["label"])]),"detail-title":n(()=>[g("span",null,U(e(r)("common.postRead")),1)]),"detail-content":n(()=>[g("div",Ne,[g("div",Oe,[o(Ge,{data:m.value,onReload:P,onClose:l[0]||(l[0]=b=>_(!1))},null,8,["data"]),o(d,{"active-key":y.value,"onUpdate:activeKey":l[1]||(l[1]=b=>y.value=b),destroyInactiveTabPane:!0,tabBarGutter:70,tabBarStyle:{padding:"0 10%",display:"flex"}},{default:n(()=>[(I(),z(re,null,ce(c,(b,Ve)=>o(u,{key:b.key,tab:b.title},{default:n(()=>[(I(),R(pe(b.component),{groupId:m.value.groupId},null,8,["groupId"]))]),_:2},1032,["tab"])),64))]),_:1},8,["active-key"])])])]),_:1},8,["openDetail","columns","phText"]),x.value?(I(),R(e(ue),{key:0,title:e(r)("page.manage.addUserToAGroup"),okBtnText:e(r)("component.button.save"),cancelBtnText:e(r)("component.button.cancel"),onCancel:w,onOk:v,class:"invite-modal"},{body:n(()=>[o(Z,{ref_key:"modalRef",ref:t,modelValue:S.value,"onUpdate:modelValue":l[3]||(l[3]=b=>S.value=b)},null,8,["modelValue"])]),_:1},8,["title","okBtnText","cancelBtnText"])):le("",!0)])}}});const tt=J(oe,[["__scopeId","data-v-4d59de12"]]);oe.__docgenInfo={exportName:"default",displayName:"manage-group",description:"",tags:{},sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/index.vue"]};export{tt as default};
