import{n as a,f as Q,b as u,w as I,y as R,z as X,O as d,M as r,u as n,S as k,a8 as Y,N as Z,F as K,h as ee}from"./vue.esm-bundler-06433f34.js";import{u as te}from"./index-2fe437c2.js";import{M as b}from"./index-d69220fe.js";import{_ as G,a as T,L as A}from"./ListItemMeta-48975394.js";import{S as oe}from"./SearchSelect-5f872db7.js";import{M as C}from"./index-9943d5fa.js";import{A as ae}from"./compact-item-943b0817.js";import{A as re}from"./index-761f2d76.js";import{S as ne}from"./index-8194f8e1.js";import{_ as ie,M as se}from"./index-b8ebef0a.js";import{D as pe}from"./DropdownButton-c71d963a.js";import{u as le}from"./vue-i18n.runtime-ed730321.js";import{U as me}from"./UserAddOutlined-b0b9d162.js";import{M as ce}from"./MoreOutlined-7525bc43.js";import{E as ue}from"./InfoCircleOutlined-588a8397.js";import{m as N}from"./index-1bdfef9a.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-de833af9.js";import"./index-6cf4e6ab.js";import"./vue-router-09c98cdc.js";import"./index-f9a7754c.js";import"./FilterForm-0cbd5abc.js";import"./index-fe2cee87.js";import"./_arrayLikeKeys-856a4a59.js";import"./_overRest-fdd2e9e6.js";import"./isArrayLikeObject-18ce9678.js";import"./isPlainObject-7ca50782.js";import"./dayjs.min-bd65d405.js";import"./pinia-1c824524.js";import"./Accordion-0d466002.js";import"./index-c186720f.js";import"./extends-98964cd2.js";import"./FormItemContext-d5d2b6af.js";import"./statusUtils-981b964f.js";import"./vnode-0120d1ab.js";import"./CloseCircleFilled-0e0600c9.js";import"./index-9435a495.js";import"./index-aab19e1a.js";import"./index-df6759cb.js";import"./index-7bc94af2.js";import"./EyeOutlined-3dbe0b46.js";import"./index-30344dd3.js";import"./motion-8927e1f6.js";import"./index-0fc5836e.js";import"./index-9c7320cf.js";import"./KeyCode-5dbefdba.js";import"./colors-897f8409.js";import"./ClockCircleOutlined-ec564bb6.js";import"./useMergedState-9fc4af37.js";import"./slide-14b3f38e.js";import"./motionUtil-c773f409.js";import"./index-0b93d195.js";import"./pickAttrs-7c36c3e9.js";import"./isMobile-12f0741d.js";import"./shallowequal-aee54418.js";import"./roundedArrow-e2771650.js";import"./RightOutlined-811eef93.js";import"./firstNotUndefined-29a740f3.js";import"./collapseMotion-a3198536.js";import"./Button-f7730f75.js";import"./_baseSet-597e192b.js";import"./_toKey-f8a2c48c.js";import"./isSymbol-4808126a.js";import"./iframe-4d7f0ef5.js";import"../sb-preview/runtime.js";import"./cloneDeep-63a05421.js";import"./index-2e1e68bc.js";import"./index-75e981cc.js";import"./LeftOutlined-2c031711.js";import"./eagerComputed-327a0c00.js";import"./responsiveObserve-dd206e94.js";import"./Col-5366a844.js";import"./useFlexGapSupport-b50d290f.js";import"./styleChecker-c17e3bbb.js";import"./SvgIcon-c1119032.js";import"./debounce-849adbc2.js";import"./index-20ecb033.js";import"./ExclamationCircleFilled-d404fa4e.js";import"./index-8de211b8.js";import"./_arrayIncludesWith-2f006ba6.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};const ge=fe;function L(p){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?Object(arguments[i]):{},l=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable}))),l.forEach(function(m){_e(p,m,e[m])})}return p}function _e(p,i,e){return i in p?Object.defineProperty(p,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):p[i]=e,p}var S=function(i,e){var l=L({},i,e.attrs);return a(ae,L({},l,{icon:ge}),null)};S.displayName="MinusOutlined";S.inheritAttrs=!1;const ve=S,he={class:"group-detail-container"},ke={href:"#"},be={href:"#"},Se={style:{display:"flex",gap:"10px"}},V=Q({__name:"GroupDetail",props:{groupId:{}},setup(p){const i=p,{t:e}=le(),l=u([]),m=u(!1),f=u(!1),y=u([]),_=u(),W=u([{name:e("page.manage.addUserToAGroup")}]),{getWorkspaceId:O}=te(),[j,E]=C.useModal(),v={Save:"Save",Delete:"Delete"},M=t=>{if(t===v.Save)return N.success(e("message.saveSuccess"),1);if(t===v.Delete)return N.success(e("message.deleteSuccess"),1)},x=()=>{f.value=!f.value},h=()=>{m.value=!m.value};function w(){h(),b.getGroupDetail(i.groupId).then(({success:t,data:o})=>{t&&(y.value=o.posts.content)}).catch(t=>console.log(t)),setTimeout(()=>h(),300)}I(i,()=>{w(),D()},{immediate:!0}),I(()=>f.value,t=>{t&&D()});const P=t=>t.map(o=>{var c;return{label:o.nickname,value:o.nickname,description:o.email,prefixImg:(c=o.thumbnail)==null?void 0:c.url,uid:o.uid,disabled:o.status.value==="JOINED"}});async function D(){const t={searchWord:""},{success:o,data:{posts:{content:c}}}=await b.getWorkspaceUserList(O,i.groupId,t);o&&(l.value=P(c))}function U(){h(),w(),h()}const B=()=>{_.value&&b.addUserWithGroup(i.groupId,{workspaceId:O,addUsers:_.value.map(t=>({uid:t.uid,nickname:t.label}))}).then(({success:t})=>{t&&(M(v.Save),U(),x())}).catch(t=>{console.log(t)})},$=t=>{j.confirm({title:e("message.deleteUser"),icon:ee(ue),okText:e("component.button.ok"),okType:"primary",cancelText:e("component.button.cancel"),onOk(){b.removeUserWithGroup(i.groupId,t).then(({success:o})=>{o&&(M(v.Delete),U())}).catch(o=>{console.log(o)})}})};return(t,o)=>{const c=re,z=ne,F=ie,H=se,q=pe,J=C;return R(),X(K,null,[d("div",he,[a(n(A),{dataSource:W.value},{renderItem:r(({item:s})=>[a(n(G),{onClick:x,style:{cursor:"pointer"}},{default:r(()=>[a(n(T),null,{avatar:r(()=>[a(c,{style:{color:"#1890ff",background:"#1890fa2b"}},{icon:r(()=>[a(n(me))]),_:1})]),title:r(()=>[d("a",ke,k(s.name),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["dataSource"]),a(n(A),{dataSource:y.value,loading:m.value},{renderItem:r(({item:s})=>[a(n(G),null,{actions:r(()=>[a(q,{open:s.visible,"onUpdate:open":g=>s.visible=g,trigger:["click"]},{overlay:r(()=>[a(H,{onClick:g=>$(s.uid)},{default:r(()=>[a(F,{key:"1"},{default:r(()=>[d("div",Se,[a(n(ve)),d("span",null,k(n(e)("page.manage.removeUserToAGroup")),1)])]),_:1})]),_:2},1032,["onClick"])]),default:r(()=>[d("a",{class:"ant-dropdown-link",onClick:o[0]||(o[0]=Y(()=>{},["prevent"]))},[a(n(ce),{style:{"font-size":"18px"}})])]),_:2},1032,["open","onUpdate:open"])]),default:r(()=>[a(z,{avatar:"",title:!1,loading:!!s.loading,active:""},{default:r(()=>[a(n(T),{description:s.email},{avatar:r(()=>{var g;return[a(c,{src:(g=s.thumbnail)==null?void 0:g.url},null,8,["src"])]}),title:r(()=>[d("a",be,k(s.nickname),1)]),_:2},1032,["description"])]),_:2},1032,["loading"])]),_:2},1024)]),_:1},8,["dataSource","loading"])]),a(n(E)),a(J,{open:f.value,"onUpdate:open":o[2]||(o[2]=s=>f.value=s),title:n(e)("page.manage.addUserToAGroup"),"ok-text":n(e)("component.button.save"),"cancel-text":n(e)("component.button.cancel"),destroyOnClose:!0,onOk:B},{default:r(()=>[a(n(oe),{width:"100%",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=s=>_.value=s),options:l.value,placeholder:n(e)("page.manage.typingUserName")},{statusDisabledText:r(()=>[Z(k(n(e)("page.manage.joined")),1)]),_:1},8,["modelValue","options","placeholder"])]),_:1},8,["open","title","ok-text","cancel-text"])],64)}}});const Qt=de(V,[["__scopeId","data-v-9c7f8865"]]);V.__docgenInfo={exportName:"default",displayName:"GroupDetail",description:"",tags:{},props:[{name:"groupId",required:!0,type:{name:"string"}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/GroupDetail.vue"]};export{Qt as default};
