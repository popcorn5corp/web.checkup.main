import{f as a,d as Q,b as m,w as I,k as R,j as X,u as d,y as n,x as r,v as k,a6 as Y,z as Z,F as K,h as ee}from"./vue.esm-bundler-da3dfd31.js";import{u as te}from"./useTheme-eec4b019.js";import{M as b}from"./index-e5788dd4.js";import{_ as G,a as T,L as A}from"./ListItemMeta-2a8c86fc.js";import{S as oe}from"./SearchSelect-04b559f6.js";import{M as C}from"./index-eb2d26d6.js";import{A as ae}from"./index-31244240.js";import{A as ne}from"./index-bbe486c9.js";import{S as re}from"./index-f53e67c5.js";import{_ as se,M as ie}from"./index-a0b3e6d9.js";import{D as le}from"./DropdownButton-0331ed8d.js";import{u as ce}from"./vue-i18n.runtime-54aa6b03.js";import{U as pe}from"./UserAddOutlined-bd8059f7.js";import{M as ue}from"./MoreOutlined-50d43014.js";import{E as me,m as L}from"./index-9fe1cf39.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-router-212c06c4.js";import"./extends-98964cd2.js";import"./_baseSet-de153ea0.js";import"./_toKey-6cc18de3.js";import"./slide-ff6c039b.js";import"./isArrayLikeObject-523edb65.js";import"./index-b4575248.js";import"./index-f0aafce9.js";import"./KeyCode-9b05785e.js";import"./pickAttrs-d6f9a41a.js";import"./colors-099fe84d.js";import"./Accordion-1ff785b2.js";import"./_commonjsHelpers-de833af9.js";import"./ClockCircleOutlined-566f9eed.js";import"./shallowequal-23878baf.js";import"./collapseMotion-6307b6e4.js";import"./index-6cf4e6ab.js";import"./iframe-8ae88575.js";import"../sb-preview/runtime.js";import"./Button-041be21e.js";import"./index-bf79754e.js";import"./index-df5fee73.js";import"./LeftOutlined-444c44d4.js";import"./eagerComputed-853093c5.js";import"./responsiveObserve-1261ffb7.js";import"./Col-72edfad4.js";import"./useFlexGapSupport-42c61aa1.js";import"./styleChecker-86e19025.js";import"./SvgIcon-db9b006f.js";import"./debounce-7fedd673.js";import"./index-6b6b6228.js";import"./ExclamationCircleFilled-da22edd1.js";import"./index-e44b3b0d.js";import"./_arrayIncludesWith-2f006ba6.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};const ge=fe;function N(l){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?Object(arguments[s]):{},c=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(e).filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable}))),c.forEach(function(p){_e(l,p,e[p])})}return l}function _e(l,s,e){return s in l?Object.defineProperty(l,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):l[s]=e,l}var S=function(s,e){var c=N({},s,e.attrs);return a(ae,N({},c,{icon:ge}),null)};S.displayName="MinusOutlined";S.inheritAttrs=!1;const ve=S,he={class:"group-detail-container"},ke={href:"#"},be={href:"#"},Se={style:{display:"flex",gap:"10px"}},V=Q({__name:"GroupDetail",props:{groupId:{}},setup(l){const s=l,{t:e}=ce(),c=m([]),p=m(!1),f=m(!1),y=m([]),_=m(),W=m([{name:e("page.manage.addUserToAGroup")}]),{getWorkspaceId:O}=te(),[j,E]=C.useModal(),v={Save:"Save",Delete:"Delete"},x=t=>{if(t===v.Save)return L.success(e("message.saveSuccess"),1);if(t===v.Delete)return L.success(e("message.deleteSuccess"),1)},M=()=>{f.value=!f.value},h=()=>{p.value=!p.value};function w(){h(),b.getGroupDetail(s.groupId).then(({success:t,data:o})=>{t&&(y.value=o.posts.content)}).catch(t=>console.log(t)),setTimeout(()=>h(),300)}I(s,()=>{w(),D()},{immediate:!0}),I(()=>f.value,t=>{t&&D()});const P=t=>t.map(o=>{var u;return{label:o.nickname,value:o.nickname,description:o.email,prefixImg:(u=o.thumbnail)==null?void 0:u.url,uid:o.uid,disabled:o.status.value==="JOINED"}});async function D(){const t={searchWord:""},{success:o,data:{posts:{content:u}}}=await b.getWorkspaceUserList(O,s.groupId,t);o&&(c.value=P(u))}function U(){h(),w(),h()}const B=()=>{_.value&&b.addUserWithGroup(s.groupId,{workspaceId:O,addUsers:_.value.map(t=>({uid:t.uid,nickname:t.label}))}).then(({success:t})=>{t&&(x(v.Save),U(),M())}).catch(t=>{console.log(t)})},$=t=>{j.confirm({title:e("message.deleteUser"),icon:ee(me),okText:e("component.button.ok"),okType:"primary",cancelText:e("component.button.cancel"),onOk(){b.removeUserWithGroup(s.groupId,t).then(({success:o})=>{o&&(x(v.Delete),U())}).catch(o=>{console.log(o)})}})};return(t,o)=>{const u=ne,z=re,F=se,H=ie,q=le,J=C;return R(),X(K,null,[d("div",he,[a(r(A),{dataSource:W.value},{renderItem:n(({item:i})=>[a(r(G),{onClick:M,style:{cursor:"pointer"}},{default:n(()=>[a(r(T),null,{avatar:n(()=>[a(u,{style:{color:"#1890ff",background:"#1890fa2b"}},{icon:n(()=>[a(r(pe))]),_:1})]),title:n(()=>[d("a",ke,k(i.name),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["dataSource"]),a(r(A),{dataSource:y.value,loading:p.value},{renderItem:n(({item:i})=>[a(r(G),null,{actions:n(()=>[a(q,{open:i.visible,"onUpdate:open":g=>i.visible=g,trigger:["click"]},{overlay:n(()=>[a(H,{onClick:g=>$(i.uid)},{default:n(()=>[a(F,{key:"1"},{default:n(()=>[d("div",Se,[a(r(ve)),d("span",null,k(r(e)("page.manage.removeUserToAGroup")),1)])]),_:1})]),_:2},1032,["onClick"])]),default:n(()=>[d("a",{class:"ant-dropdown-link",onClick:o[0]||(o[0]=Y(()=>{},["prevent"]))},[a(r(ue),{style:{"font-size":"18px"}})])]),_:2},1032,["open","onUpdate:open"])]),default:n(()=>[a(z,{avatar:"",title:!1,loading:!!i.loading,active:""},{default:n(()=>[a(r(T),{description:i.email},{avatar:n(()=>{var g;return[a(u,{src:(g=i.thumbnail)==null?void 0:g.url},null,8,["src"])]}),title:n(()=>[d("a",be,k(i.nickname),1)]),_:2},1032,["description"])]),_:2},1032,["loading"])]),_:2},1024)]),_:1},8,["dataSource","loading"])]),a(r(E)),a(J,{open:f.value,"onUpdate:open":o[2]||(o[2]=i=>f.value=i),title:r(e)("page.manage.addUserToAGroup"),"ok-text":r(e)("component.button.save"),"cancel-text":r(e)("component.button.cancel"),destroyOnClose:!0,onOk:B},{default:n(()=>[a(r(oe),{width:"100%",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=i=>_.value=i),options:c.value,placeholder:r(e)("page.manage.typingUserName")},{statusDisabledText:n(()=>[Z(k(r(e)("page.manage.joined")),1)]),_:1},8,["modelValue","options","placeholder"])]),_:1},8,["open","title","ok-text","cancel-text"])],64)}}});const ht=de(V,[["__scopeId","data-v-9c7f8865"]]);V.__docgenInfo={exportName:"default",displayName:"GroupDetail",description:"",tags:{},props:[{name:"groupId",required:!0,type:{name:"string"}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/GroupDetail.vue"]};export{ht as default};
