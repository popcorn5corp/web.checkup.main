import{_ as ve}from"./DrawerContainer-a0c2b9f6.js";import{d as ee,b as m,r as fe,e as O,w as te,j as B,m as T,y as s,V as Z,x as o,k as _,f as a,z as x,v as S,F as G,u as R,B as V,Y as be,Z as _e}from"./vue.esm-bundler-da3dfd31.js";import{E as ye,P as ge,b as ke}from"./CardList-70ef427d.js";import{B as b}from"./index-74df8124.js";import"./useTheme-eec4b019.js";import{_ as F}from"./Button-041be21e.js";import"./DropdownButton-0331ed8d.js";import{D as Ce}from"./DynamicTable-603a7f8e.js";import"./SvgIcon-db9b006f.js";import{c as f}from"./content-e5dcb2b1.js";import{d as N}from"./Accordion-1ff785b2.js";import{I as q}from"./CustomInput-b10632ad.js";import{S as H}from"./CustomSelect-244e7a83.js";import{a as J}from"./isArrayLikeObject-523edb65.js";import{F as z}from"./index-5df3ba7c.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{S as De}from"./index-bf79754e.js";import{M}from"./index-eb2d26d6.js";import{u as Ie}from"./vue-i18n.runtime-54aa6b03.js";import{Q as L}from"./QuestionCircleTwoTone-d157f255.js";import{m as K}from"./index-9fe1cf39.js";import"./Drawer-003c7dab.js";import"./index-7cccea8d.js";import"./index-31244240.js";import"./extends-98964cd2.js";import"./css-1021bd93.js";import"./colors-099fe84d.js";import"./slide-ff6c039b.js";import"./index-6b6b6228.js";import"./KeyCode-9b05785e.js";import"./pickAttrs-d6f9a41a.js";import"./LeftOutlined-444c44d4.js";import"./SwapOutlined-d76ec9a6.js";import"./index-b4575248.js";import"./index-f0aafce9.js";import"./vue-router-212c06c4.js";import"./_baseSet-de153ea0.js";import"./_toKey-6cc18de3.js";import"./_commonjsHelpers-de833af9.js";import"./index-6cf4e6ab.js";import"./iframe-8ae88575.js";import"../sb-preview/runtime.js";import"./BasicTable-d1256578.js";import"./omit-3709658d.js";import"./_flatRest-9379d133.js";import"./useTour-3e614e3a.js";import"./index-df5fee73.js";import"./eagerComputed-853093c5.js";import"./responsiveObserve-1261ffb7.js";import"./ExclamationCircleFilled-da22edd1.js";import"./collapseMotion-6307b6e4.js";import"./index-e44b3b0d.js";import"./index-a0b3e6d9.js";import"./shallowequal-23878baf.js";import"./_arrayIncludesWith-2f006ba6.js";import"./index-434e0d27.js";import"./useFlexGapSupport-42c61aa1.js";import"./styleChecker-86e19025.js";import"./index-e47c3f83.js";import"./CaretDownOutlined-6d1d12da.js";import"./debounce-7fedd673.js";import"./ClockCircleOutlined-566f9eed.js";import"./Col-72edfad4.js";import"./hasIn-c3b6575d.js";const h=()=>({boardContent:"",boardFiles:[],boardId:"",boardTitle:"",createdAt:N(N()).unix(),division:{label:"",value:"PRIVATE"},thumbnail:null,permission:{label:"",value:"NORMAL"}}),we={class:"post-detail"},ae=ee({__name:"PostDetail",props:{data:{},isEdit:{type:Boolean,default:!1},mode:{}},setup(y,{expose:I}){const c=y,{Item:i}=z,g=m([]),w=m([{label:"비공개",value:"PRIVATE"},{label:"공개",value:"PUBLIC"}]),C=m(),n=m(),e=fe({layout:"horizontal",post:h(),clonePost:h()});(async()=>g.value=b.permissionCodes)();const Y=async()=>C.value.validate(),k=r=>N.unix(r).format("YYYY-MM-DD"),v=()=>e.post=J(e.clonePost),U=()=>{const r=n.value.getFiles();return{...e.post,boardFiles:r}},E=O(()=>{const{layout:r}=e;return r==="horizontal"?{labelCol:{span:6},wrapperCol:{span:14}}:{}});return te(()=>c.data,r=>{e.post={...r,createdAt:k(Number(r.createdAt))},e.clonePost=J(r)},{immediate:!0}),I({getPostDetail:U,rollbackPost:v,onSubmit:Y}),(r,u)=>(_(),B("div",we,[r.isEdit?(_(),T(o(z),Z({key:1,ref_key:"formRef",ref:C,layout:e.layout,model:e},E.value),{default:s(()=>[a(o(i),{name:"boardTitle"},{default:s(()=>[a(o(q),{value:e.post.boardTitle,"onUpdate:value":u[0]||(u[0]=d=>e.post.boardTitle=d),label:"게시물 제목"},null,8,["value"])]),_:1}),a(o(i),null,{default:s(()=>[a(o(q),{value:e.post.boardContent,"onUpdate:value":u[1]||(u[1]=d=>e.post.boardContent=d),label:"게시물 내용"},null,8,["value"])]),_:1}),a(o(i),null,{default:s(()=>[a(o(q),{value:e.post.createdAt,"onUpdate:value":u[2]||(u[2]=d=>e.post.createdAt=d),label:"생성일",disabled:""},null,8,["value"])]),_:1}),a(o(i),null,{default:s(()=>[a(o(H),{value:e.post.permission.label,"onUpdate:value":u[3]||(u[3]=d=>e.post.permission.label=d),options:g.value,label:"권한"},null,8,["value","options"])]),_:1}),a(o(i),null,{default:s(()=>[a(o(H),{value:e.post.division.label,"onUpdate:value":u[4]||(u[4]=d=>e.post.division.label=d),options:w.value,label:"게시물 구분"},null,8,["value","options"])]),_:1})]),_:1},16,["layout","model"])):(_(),T(o(z),Z({key:0,layout:e.layout,model:e},E.value),{default:s(()=>[a(o(i),{label:"게시물 제목"},{default:s(()=>[x(S(e.post.boardTitle),1)]),_:1}),a(o(i),{label:"게시물 내용"},{default:s(()=>[x(S(e.post.boardContent),1)]),_:1}),a(o(i),{label:"생성일"},{default:s(()=>[x(S(e.post.createdAt),1)]),_:1}),a(o(i),{label:"권한"},{default:s(()=>[x(S(e.post.permission.value),1)]),_:1}),a(o(i),{label:"게시물 구분"},{default:s(()=>[x(S(e.post.division.value),1)]),_:1})]),_:1},16,["layout","model"]))]))}});const X=oe(ae,[["__scopeId","data-v-773a5e3e"]]);ae.__docgenInfo={exportName:"default",displayName:"PostDetail",description:"",tags:{},expose:[{name:"getPostDetail"},{name:"rollbackPost"},{name:"onSubmit"}],props:[{name:"data",required:!0,type:{name:"Post"}},{name:"isEdit",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"mode",required:!0,type:{name:"ContentMode"}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/Sample/table-sample/components/PostDetail.vue"]};const Pe=[{title:"게시물 제목",dataIndex:"boardTitle",key:"boardTitle"},{title:"게시물 내용",dataIndex:"boardContent",key:"boardContent"},{title:"생성일",dataIndex:"createdAt",key:"createdAt",customRender:({text:y})=>N.unix(y).format("YYYY-MM-DD")},{title:"권한",dataIndex:"permission",key:"permission"},{title:"게시물 구분",dataIndex:"division",key:"division"}],xe=y=>(be("data-v-01ab0586"),y=y(),_e(),y),Se={class:"detail-contents"},Re={class:"profile"},Te={class:"img-wrapper"},he=["src"],Ue=xe(()=>R("div",{class:"info"},null,-1)),Ee={class:"tab-wrapper"},le=ee({__name:"index",setup(y){const I=f.R,{t:c}=Ie(),i=m(),g=m(),w=m(!1),C=m(!1),n=m(I),e=O(()=>n.value===f.C||n.value===f.U),Y=O(()=>n.value===f.C?c("common.postRegist"):n.value===f.U?c("common.postModify"):c("common.postRead")),k=m(!1),v=m(h()),U=O(()=>{const t=o(v).boardFiles.length?o(v).boardFiles[0].url:"";return t.includes(".xlsx")||t.includes(".xlsx")?ye:t.includes(".pdf")?ge:t.includes(".pptx")?ke:t});b.getPermissionCodes();const E=()=>b.getPageInfo(),r=t=>{k.value=!0,C.value=!0,n.value=I,b.getOneById(t.boardId).then(({success:l,data:D})=>{l&&(v.value=D)}).finally(()=>{C.value=!1})};te(()=>o(k),t=>{t||(v.value=h())});const u=t=>b.getAll(t),d=t=>{const{posts:l}=t;return l},se=t=>t,ne=t=>t.map(l=>({...l,title:l.boardTitle,tag:l.division,content:l.boardContent})),ie=()=>b.getSortableCodes(),re=()=>{M.confirm({content:c("message.modalSaveCheck"),icon:a(L),onOk(){g.value.onSubmit().then(()=>{de(()=>{var t;(t=i.value)==null||t.reload({isReset:!0}),A(),setTimeout(()=>{K.success(c("message.saveSuccess"),1)},300)})})},async onCancel(){}})},ue=(t,l)=>{M.confirm({content:c("message.modalDeleteCheck"),icon:a(L),onOk(){const D={boardIds:l};b.deleteByIds(D).then(({success:p})=>{var P;p&&((P=i.value)==null||P.reload({isReset:!0}),setTimeout(()=>{K.success(c("message.deleteSuccess"),1)},300))}),A()},async onCancel(){}})},de=t=>{const l=g.value.getPostDetail(),{boardId:D,boardContent:p,boardFiles:P,boardTitle:j,division:Q,permission:W}=l;n.value===f.C?b.createOne({boardContent:p,boardFiles:P,boardTitle:j,division:Q,permission:W}).then(({success:$})=>{$&&t()}):b.updateOne({boardId:D,boardContent:p,boardFiles:P,boardTitle:j,division:Q,permission:W}).then(({success:$})=>{$&&t()})},pe=()=>{e.value?M.confirm({content:c("message.modalEditCloseCheck"),icon:a(L),onOk(){A()},async onCancel(){}}):A()},me=()=>{n.value=I,g.value.rollbackPost()},A=()=>{w.value=!1,n.value=I},ce=()=>{w.value=!0,n.value=f.C,v.value=h()};return(t,l)=>{const D=ve;return _(),B(G,null,[a(D,{openDetail:k.value,"onUpdate:openDetail":l[1]||(l[1]=p=>k.value=p),resize:!0,floating:!1,mask:!1,drawerTitle:t.$t("page.manage.userInfo"),resizeOption:"push",drawerWidth:"30%",drawerPosition:"right"},{drawerContent:s(()=>[R("div",Se,[R("div",Re,[R("div",Te,[U.value?(_(),B("img",{key:0,src:U.value,width:200,height:200},null,8,he)):V("",!0)]),Ue]),R("div",Ee,[!C.value&&v.value?(_(),T(X,{key:0,ref_key:"postDetailRef",ref:g,data:v.value,isEdit:e.value,mode:n.value},null,8,["data","isEdit","mode"])):V("",!0)])])]),default:s(()=>[a(o(Ce),{openDetail:k.value,"onUpdate:openDetail":l[0]||(l[0]=p=>k.value=p),ref_key:"dynamicTableRef",ref:i,"row-key":"boardId",columns:o(Pe),"filter-request":E,"data-request":u,"column-request":ie,"data-callback":d,"content-callback":se,"card-content-callback":ne,onRowClick:r,onRowDelete:ue,onRowAdd:ce},null,8,["openDetail","columns"])]),_:1},8,["openDetail","drawerTitle"]),a(o(M),{open:w.value,"onUpdate:open":l[3]||(l[3]=p=>w.value=p),title:Y.value,width:500,destroyOnClose:""},{footer:s(()=>[e.value?(_(),B(G,{key:0},[n.value===o(f).U?(_(),T(o(F),{key:"cancel",onClick:me,label:t.$t("component.button.cancel")},null,8,["label"])):V("",!0),a(o(F),{key:"save",type:"primary",onClick:re,label:t.$t("component.button.save")},null,8,["label"])],64)):(_(),T(o(F),{key:"edit",type:"primary",onClick:l[2]||(l[2]=p=>n.value=o(f).U),label:t.$t("component.button.edit")},null,8,["label"])),a(o(F),{key:"close",onClick:pe,label:t.$t("component.button.close")},null,8,["label"])]),default:s(()=>[a(o(De),{spinning:C.value},{default:s(()=>[a(X,{ref_key:"postDetailRef",ref:g,data:v.value,isEdit:e.value,mode:n.value},null,8,["data","isEdit","mode"])]),_:1},8,["spinning"])]),_:1},8,["open","title"])],64)}}});const zt=oe(le,[["__scopeId","data-v-01ab0586"]]);le.__docgenInfo={exportName:"default",displayName:"table-sample",description:"",tags:{},sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/Sample/table-sample/index.vue"]};export{zt as default};
