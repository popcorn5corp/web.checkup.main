import{f,b as g,e as D,w as V,x as n,d as J,l as le,j as T,F as B,X as E,m as _,B as h,k as m,u as C,v as re,ac as se,U as L,y as R,V as ie,K as ce,R as M}from"./vue.esm-bundler-da3dfd31.js";import{_ as S,D as ue}from"./Button-041be21e.js";import"./DropdownButton-0331ed8d.js";import{F as me}from"./useTheme-eec4b019.js";import"./SvgIcon-db9b006f.js";import{T as de}from"./BasicTable-d1256578.js";import{a as pe}from"./useTour-3e614e3a.js";import{u as fe,e as ve}from"./Accordion-1ff785b2.js";import{a as U}from"./isArrayLikeObject-523edb65.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import{A as z}from"./index-31244240.js";import{u as be}from"./vue-i18n.runtime-54aa6b03.js";import{_ as we}from"./index-434e0d27.js";import{D as ye}from"./index-7cccea8d.js";var ge={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:t}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:e}}]}},name:"delete",theme:"twotone"};const Te=ge;function W(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),a.forEach(function(s){he(o,s,t[s])})}return o}function he(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var q=function(e,t){var a=W({},e,t.attrs);return f(z,W({},a,{icon:Te}),null)};q.displayName="DeleteTwoTone";q.inheritAttrs=!1;const _e=q;var Ce={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M420.6 798h182.9V642H420.6zM411 561.4l9.5 16.6h183l9.5-16.6L811.3 226H212.7z",fill:t}},{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.5 798H420.6V642h182.9v156zm9.5-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z",fill:e}}]}},name:"filter",theme:"twotone"};const De=Ce;function X(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),a.forEach(function(s){Fe(o,s,t[s])})}return o}function Fe(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var A=function(e,t){var a=X({},e,t.attrs);return f(z,X({},a,{icon:De}),null)};A.displayName="FilterTwoTone";A.inheritAttrs=!1;const Re=A;var xe={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z",fill:t}},{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:e}}]}},name:"plus-circle",theme:"twotone"};const ke=xe;function G(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),a.forEach(function(s){Ie(o,s,t[s])})}return o}function Ie(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var H=function(e,t){var a=G({},e,t.attrs);return f(z,G({},a,{icon:ke}),null)};H.displayName="PlusCircleTwoTone";H.inheritAttrs=!1;const Pe=H;function Oe(o){const e=g([]),t=g([]),a=D(()=>n(e));let s=0;V(()=>n(o),async({filterRequest:u,filters:i})=>{if(!s){let r=[],v=[];if(i&&i.length&&(r=i),u)try{const{data:d,success:y}=await u();y&&(r=d.filters)}catch(d){console.log(d)}v=n(r).sort((d,y)=>d.order-y.order).map((d,y)=>{const{type:k,options:I,selectedItems:$}=d,F=k==="Radio"?I?[I[0]]:[]:$||[];return{...d,index:y,open:!0,options:I||[],selectedItems:F,removeAll:k==="RangeDatePicker"}}),e.value=v,t.value=U(n(e)),s++}},{immediate:!0});function x(u){const{index:i}=u;n(e)[i]={...u}}function p(){n(e).map(u=>{const{type:i,options:r}=u,v=i==="Radio"?[r[0]]:[];u.selectedItems=v})}function w(){e.value=U(n(t))}return{getFilterFormItems:a,setFilterFormItem:x,clearSelectedItems:p,initFilterFormItems:w}}const Be={filterFormItems:[],selectedRows:[],activeFilter:!1},Se={class:"table-tags-container"},$e={key:0,class:"table-tag"},Ve=["onClick"],Q=J({__name:"TableTags",props:{items:{}},setup(o){const e=o,t=fe(),a=D(()=>e.items),s=D(()=>n(a).some(p=>p.selectedItems.length>0)),x=(p,w)=>{const{selectedItems:u,removeAll:i}=p,r={...p,selectedItems:i?[]:u.filter(v=>v.value!==w.value)};t.setFilterFormItem(r)};return(p,w)=>{const u=le("font-awesome-icon");return m(),T("div",Se,[(m(!0),T(B,null,E(a.value,i=>(m(),T(B,{key:i.key},[(m(!0),T(B,null,E(i.selectedItems,(r,v)=>(m(),T(B,{key:v},[r.value!==null?(m(),T("span",$e,[C("span",null,re(r.label),1),C("span",{onClick:d=>x(i,r)},[f(u,{icon:["fas","xmark"]})],8,Ve)])):h("",!0)],64))),128))],64))),128)),s.value?(m(),_(n(S),{key:0,class:"table-tag",label:p.$t("component.button.reset"),onClick:w[0]||(w[0]=i=>n(t).clearSelectedItems())},null,8,["label"])):h("",!0)])}}});const ze=K(Q,[["__scopeId","data-v-afc329c3"]]);Q.__docgenInfo={exportName:"default",displayName:"TableTags",description:"",tags:{},props:[{name:"items",required:!0,type:{name:"Array",elements:[{name:"FilterFormItem"}]}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/components/dynamic-table/src/components/TableTags.vue"]};const qe={class:"dynamic-table-wrapper"},Ae={class:"body",ref:"bodyRef"},He={class:"header"},je={class:"table-btns"},Y=J({__name:"DynamicTable",props:{filters:{default:()=>[]},openDetail:{type:Boolean},showRegist:{type:Boolean,default:!0},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},phText:{},deleteBtnText:{},filterRequest:{},contentCallback:{},cardContentCallback:{},dataSource:{},columns:{},loading:{type:Boolean},total:{},size:{},options:{},pagination:{},rowKey:{},initParam:{},layoutType:{},showToolbar:{type:Boolean,default:!0},toolbarOptions:{},dataRequest:{},columnRequest:{},dataCallback:{},dropdownPrefixCls:{},bordered:{type:Boolean},locale:{},onChange:{},onResizeColumn:{},rowSelection:{},getPopupContainer:{},scroll:{},sortDirections:{},showSorterTooltip:{type:[Boolean,Object]},prefixCls:{},tableLayout:{},rowClassName:{},title:{},footer:{},id:{},showHeader:{type:Boolean},components:{},customRow:{},customHeaderRow:{},direction:{},expandFixed:{type:[String,Boolean]},expandColumnWidth:{},expandedRowKeys:{},defaultExpandedRowKeys:{},expandedRowRender:{},expandRowByClick:{type:Boolean},expandIcon:{},onExpand:{},onExpandedRowsChange:{},defaultExpandAllRows:{type:Boolean},indentSize:{},expandIconColumnIndex:{},showExpandColumn:{type:Boolean},expandedRowClassName:{},childrenColumnName:{},rowExpandable:{},sticky:{type:[Boolean,Object]},transformCellText:{}},emits:["row-click","change","search","row-add","row-select","row-delete","update:openDetail"],setup(o,{expose:e,emit:t}){const a=o;e({reload:l=>{var c;(c=i.value)==null||c.getDataSource(l)}});const s=pe(),x=se(),{t:p}=be(),w=g(null),u=g(),i=g(),r=g(!1),v=g(!!(a.filters&&a.filters.length||a.filterRequest)),d=D(()=>({delete:a.deleteBtnText||p("component.button.delete"),download:p("component.button.download"),registration:p("component.button.registration"),filter:p("component.button.filter")})),y=g({...Be}),k=D(()=>({...a,...n(u)}));function I(l){u.value={...n(u),...l}}const $=D(()=>({...n(y)}));function F(l){y.value={...n(y),...l}}const{getFilterFormItems:P,clearSelectedItems:Z,setFilterFormItem:ee,initFilterFormItems:te}=Oe(k);V(()=>{var l;return(l=n(i))==null?void 0:l.selectedRows},l=>{F({selectedRows:l})}),V(n(P),l=>{F({filterFormItems:l})},{immediate:!0,deep:!0}),V(()=>a.openDetail,()=>{a.openDetail&&r.value&&(r.value=!1)});function ne(){var l;t("update:openDetail",!1),(l=n(i))==null||l.initCustomRow()}let oe={setProps:I,setContextValues:F,getFilterFormItems:()=>n(P),setFilterFormItem:ee,clearSelectedItems:Z,initFilterFormItems:te,closeDetail:()=>{var l;t("update:openDetail",!1),(l=n(i))==null||l.initCustomRow()},closeFilter:()=>{n(r)&&(r.value=!1)},emitter:t};const ae=D(()=>({...x,...n(k)}));return F({activeFilter:n(v)}),ve({wrapRef:w,...oe,getContextValues:$,getBindValues:ae}),(l,c)=>(m(),T("div",{ref_key:"wrapRef",ref:w,class:"dynamic-table-containter"},[C("div",qe,[C("div",Ae,[C("div",{class:"content",ref:"leftRef",style:L({width:a.showToolbar&&r.value?"70%":"100%",paddingRight:a.showToolbar&&r.value?"20px":"0"})},[C("div",He,[f(ze,{items:n(P)},null,8,["items"]),C("div",je,[f(n(we),null,{default:R(()=>{var b;return[((b=$.value.selectedRows)==null?void 0:b.length)>0?(m(),T(B,{key:0},[l.showDownload?(m(),_(n(S),{key:0,label:d.value.download,size:"middle"},{icon:R(()=>[f(n(ue))]),_:1},8,["label"])):h("",!0),l.showDelete?(m(),_(n(S),{key:1,label:d.value.delete,size:"middle",onClick:c[0]||(c[0]=O=>{var j,N;return l.$emit("row-delete",(j=i.value)==null?void 0:j.selectedRows,(N=i.value)==null?void 0:N.selectedRowKeys)})},{icon:R(()=>[f(n(_e))]),_:1},8,["label"])):h("",!0)],64)):h("",!0),M(l.$slots,"tableBtns",{},void 0,!0),l.showRegist?(m(),_(n(S),{key:1,ref:O=>n(s).setTour(3,O),label:d.value.registration,size:"middle",onClick:c[1]||(c[1]=O=>l.$emit("row-add"))},{icon:R(()=>[f(n(Pe))]),_:1},8,["label"])):h("",!0),v.value?(m(),_(n(S),{key:2,ref:O=>n(s).setTour(4,O),type:"primary",label:d.value.filter,size:"middle",onClick:c[2]||(c[2]=()=>{r.value=!r.value,ne()})},{icon:R(()=>[f(n(Re))]),_:1},8,["label"])):h("",!0)]}),_:3})])]),f(n(ye)),f(n(de),ie({ref_key:"tableRef",ref:i},{...a},{onRowAdd:c[3]||(c[3]=b=>l.$emit("row-add",b)),onRowClick:c[4]||(c[4]=b=>l.$emit("row-click",b)),onRowSelect:c[5]||(c[5]=b=>l.$emit("row-select",b))}),{default:R(()=>[M(l.$slots,"default",{},void 0,!0)]),_:3},16)],4),(m(),_(ce,null,[r.value&&!l.openDetail?(m(),_(n(me),{key:0,items:n(P),onClose:c[6]||(c[6]=b=>r.value=b),style:L({width:a.showToolbar&&r.value&&!l.openDetail?"30%":""})},null,8,["items","style"])):h("",!0)],1024))],512)])],512))}});const tt=K(Y,[["__scopeId","data-v-81b9b81e"]]);Y.__docgenInfo={exportName:"default",displayName:"DynamicTable",description:"",tags:{},expose:[{name:"reload"}],props:[{name:"filters",description:"필터 목록 (filterRequest 대체 가능)",required:!1,type:{name:"FilterList"},defaultValue:{func:!1,value:"() => []"}},{name:"openDetail",description:"상세 영역 표출 여부 v-model",required:!1,type:{name:"boolean"}},{name:"showRegist",description:"등록 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDownload",description:"다운로드 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDelete",description:"삭제 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"phText",description:"검색창 Placeholder Text",required:!1,type:{name:"string"}},{name:"deleteBtnText",description:"삭제 버튼 텍스트",required:!1,type:{name:"string"}},{name:"filterRequest",description:"테이블 필터 정보에 대한 API",required:!1,type:{name:"TSFunctionType"}},{name:"contentCallback",description:"Request API에 대한 응답 Content 처리를 위한 Callback",tags:{params:[{title:"param",type:{name:"mixed"},name:"content"}]},required:!1,type:{name:"TSFunctionType"}},{name:"cardContentCallback",description:"Request API에 대한 응답 CardView 정보 대응을 위한 Content 처리 Callback",tags:{params:[{title:"param",type:{name:"mixed"},name:"content"}]},required:!1,type:{name:"TSFunctionType"}},{name:"showToolbar",defaultValue:{func:!1,value:"true"}}],events:[{name:"row-delete"},{name:"row-add"},{name:"row-click"},{name:"row-select"},{name:"change"},{name:"search"},{name:"update:openDetail"}],slots:[{name:"tableBtns"},{name:"default"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/components/dynamic-table/src/DynamicTable.vue"]};export{tt as D,Pe as P};
