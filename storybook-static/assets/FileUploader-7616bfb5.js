var M=Object.defineProperty;var V=(s,n,r)=>n in s?M(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r;var R=(s,n,r)=>(V(s,typeof n!="symbol"?n+"":n,r),r);import{f as F,d as D,b as S,w as H,j as q,y as j,x as U,k as A,m as I,B as N}from"./vue.esm-bundler-da3dfd31.js";import{s as L}from"./useTheme-eec4b019.js";import{c as g}from"./_commonjsHelpers-de833af9.js";import{_ as C}from"./Button-041be21e.js";import"./DropdownButton-0331ed8d.js";import"./SvgIcon-db9b006f.js";import{A as z}from"./index-31244240.js";import{U as G}from"./index-2a8fec04.js";import{m as E}from"./index-9fe1cf39.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const W=X;function T(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){J(s,u,r[u])})}return s}function J(s,n,r){return n in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}var O=function(n,r){var i=T({},n,r.attrs);return F(z,T({},i,{icon:W}),null)};O.displayName="UploadOutlined";O.inheritAttrs=!1;const Q=O;class Y{constructor(){R(this,"PATH","/workspace/file")}upload(n,r){return L.upload(this.PATH+"/upload",n,r)}download(n){return L.download(this.PATH+"/download",n)}}const B=new Y;var k={exports:{}};(function(s,n){(function(r,i){i()})(g,function(){function r(o,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function i(o,t,a){var e=new XMLHttpRequest;e.open("GET",o),e.responseType="blob",e.onload=function(){w(e.response,t,a)},e.onerror=function(){console.error("could not download file")},e.send()}function u(o){var t=new XMLHttpRequest;t.open("HEAD",o,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function v(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(t)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof g=="object"&&g.global===g?g:void 0,_=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(o,t,a){var e=c.URL||c.webkitURL,l=document.createElement("a");t=t||o.name||"download",l.download=t,l.rel="noopener",typeof o=="string"?(l.href=o,l.origin===location.origin?v(l):u(l.href)?i(o,t,a):v(l,l.target="_blank")):(l.href=e.createObjectURL(o),setTimeout(function(){e.revokeObjectURL(l.href)},4e4),setTimeout(function(){v(l)},0))}:"msSaveOrOpenBlob"in navigator?function(o,t,a){if(t=t||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(r(o,a),t);else if(u(o))i(o,t,a);else{var e=document.createElement("a");e.href=o,e.target="_blank",setTimeout(function(){v(e)})}}:function(o,t,a,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof o=="string")return i(o,t,a);var l=o.type==="application/octet-stream",d=/constructor/i.test(c.HTMLElement)||c.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||l&&d||_)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var m=f.result;m=h?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=m:location=m,e=null},f.readAsDataURL(o)}else{var y=c.URL||c.webkitURL,p=y.createObjectURL(o);e?e.location=p:location.href=p,e=null,setTimeout(function(){y.revokeObjectURL(p)},4e4)}});c.saveAs=w.saveAs=w,s.exports=w})})(k);var Z=k.exports;const K={class:"file-uplaod-wrapper"},ee="https://sawork-prod.s3.ap-northeast-2.amazonaws.com/",x=D({__name:"FileUploader",props:{files:{default:()=>[]},type:{default:"TEST"},readonly:{type:Boolean,default:!1},showRemove:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!0},showDownload:{type:Boolean,default:!0}},emits:["change","remove"],setup(s,{expose:n}){const r=s,i=S([]),u=S([]);H(()=>r.files,a=>{i.value=a.map(e=>({uid:e.fileId,name:e.originName,url:e.url,status:"done"}))},{immediate:!0});const v=async a=>{var y;const{onSuccess:e,onError:l,file:d,onProgress:h}=a,f=new FormData;f.append("files[0].file",d),f.append("files[0].type",r.type);try{const{data:p,success:m}=await B.upload(f,{});if(m){E.success("upload successfully.");const{files:P}=p,b=P[0];(y=i.value)==null||y.push({uid:d.uid,name:b.originName,url:b.url,status:"done"}),u.value=[...u.value||[],{...b,remove:!1}]}else E.error("upload failed.")}catch(p){console.log(p),E.error("upload failed.")}},c=a=>{const{name:e,url:l}=a;B.download({fileName:e,fileUrl:l==null?void 0:l.replace(ee,"")}).then(d=>{Z.saveAs(d,a.name)})},_=a=>{},w=a=>{var e;i.value=(e=i.value)==null?void 0:e.filter(l=>l.uid!==a.uid)},o=a=>{};return n({getFiles:()=>r.files.map(e=>{var d;const l=(d=i.value)==null?void 0:d.find(h=>h.uid===e.fileId);return{...e,remove:!l}}).concat(u.value)}),(a,e)=>(A(),q("div",K,[F(U(G),{class:"file-uploader","file-list":i.value,action:"noaction","list-type":"picture",multiple:!0,"custom-request":v,"before-upload":o,"show-upload-list":{showDownloadIcon:a.showDownload,showRemoveIcon:!a.readonly||a.showRemove,showPreviewIcon:a.showPreview},onDownload:c,onRemove:w,onChange:_},{default:j(()=>[a.readonly?N("",!0):(A(),I(U(C),{key:0,label:"Upload"},{icon:j(()=>[F(U(Q))]),_:1}))]),_:1},8,["file-list","show-upload-list"])]))}});const fe=$(x,[["__scopeId","data-v-075f635e"]]);x.__docgenInfo={exportName:"default",displayName:"FileUploader",description:"",tags:{},expose:[{name:"getFiles"}],props:[{name:"files",required:!1,type:{name:"FileList"},defaultValue:{func:!1,value:"() => []"}},{name:"type",required:!1,type:{name:"TSTypeReference"},defaultValue:{func:!1,value:"'TEST'"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showRemove",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showPreview",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDownload",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"change"},{name:"remove"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/components/file-uploader/src/FileUploader.vue"]};export{fe as F};
