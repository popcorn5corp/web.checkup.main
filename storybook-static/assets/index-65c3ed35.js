import{_ as H}from"./iframe-4d7f0ef5.js";import{_ as j}from"./Button-f7730f75.js";import{f as W,b as y,y as I,B as R,M as n,O as g,n as o,u as e,S as U,d as te,r as ae,z,N as K,a8 as ne,h as se,ab as Q,F as re,_ as le,P as pe,R as ie}from"./vue.esm-bundler-06433f34.js";import{u as Y}from"./index-2fe437c2.js";import{M as S}from"./index-d69220fe.js";import{P as ce,D as me}from"./DynamicTable-58fe0c48.js";import"./SvgIcon-c1119032.js";import{M as ue}from"./Modal-80582b28.js";import{S as de}from"./SearchSelect-5f872db7.js";import{M as _e}from"./index-b2fd6c35.js";import{_ as ge}from"./FormItemRest-17cb8524.js";import{I as O}from"./CustomInput-dd06c449.js";import{u as A}from"./vue-i18n.runtime-ed730321.js";import{c as N}from"./content-e5dcb2b1.js";import{M as J}from"./index-9943d5fa.js";import{c as fe}from"./cloneDeep-63a05421.js";import{F as q}from"./index-6855d82a.js";import{_ as ve,M as ye}from"./index-b8ebef0a.js";import{D as ke}from"./DropdownButton-c71d963a.js";import{M as be}from"./MoreOutlined-7525bc43.js";import{C as De}from"./KeyCode-5dbefdba.js";import{C as we}from"./index-0b93d195.js";import{E as Ie}from"./InfoCircleOutlined-588a8397.js";import{m as V}from"./index-1bdfef9a.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{d as xe}from"./dayjs.min-bd65d405.js";import{_ as he,T as Me}from"./index-b5497c2b.js";import{Q as Ce}from"./QuestionCircleTwoTone-fdcc003c.js";import"../sb-preview/runtime.js";import"./motion-8927e1f6.js";import"./compact-item-943b0817.js";import"./extends-98964cd2.js";import"./index-aab19e1a.js";import"./index-df6759cb.js";import"./_commonjsHelpers-de833af9.js";import"./index-6cf4e6ab.js";import"./vue-router-09c98cdc.js";import"./index-f9a7754c.js";import"./FilterForm-0cbd5abc.js";import"./index-fe2cee87.js";import"./_arrayLikeKeys-856a4a59.js";import"./_overRest-fdd2e9e6.js";import"./isArrayLikeObject-18ce9678.js";import"./isPlainObject-7ca50782.js";import"./pinia-1c824524.js";import"./Accordion-0d466002.js";import"./index-c186720f.js";import"./FormItemContext-d5d2b6af.js";import"./statusUtils-981b964f.js";import"./vnode-0120d1ab.js";import"./CloseCircleFilled-0e0600c9.js";import"./index-9435a495.js";import"./index-7bc94af2.js";import"./EyeOutlined-3dbe0b46.js";import"./index-30344dd3.js";import"./index-0fc5836e.js";import"./index-9c7320cf.js";import"./colors-897f8409.js";import"./ClockCircleOutlined-ec564bb6.js";import"./useMergedState-9fc4af37.js";import"./slide-14b3f38e.js";import"./motionUtil-c773f409.js";import"./shallowequal-aee54418.js";import"./roundedArrow-e2771650.js";import"./RightOutlined-811eef93.js";import"./firstNotUndefined-29a740f3.js";import"./collapseMotion-a3198536.js";import"./_baseSet-597e192b.js";import"./_toKey-f8a2c48c.js";import"./isSymbol-4808126a.js";import"./BasicTable-21da69d0.js";import"./omit-b91ff683.js";import"./_flatRest-00fa2235.js";import"./useTour-42456f6d.js";import"./CardList-527706f2.js";import"./css-1021bd93.js";import"./index-20ecb033.js";import"./pickAttrs-7c36c3e9.js";import"./LeftOutlined-2c031711.js";import"./SwapOutlined-5132679b.js";import"./index-75e981cc.js";import"./eagerComputed-327a0c00.js";import"./responsiveObserve-dd206e94.js";import"./index-2e1e68bc.js";import"./ExclamationCircleFilled-d404fa4e.js";import"./index-8de211b8.js";import"./index-97432be2.js";import"./useFlexGapSupport-b50d290f.js";import"./styleChecker-c17e3bbb.js";import"./index-729770bf.js";import"./CaretDownOutlined-4e6bfc62.js";import"./debounce-849adbc2.js";import"./index-d2655575.js";import"./Col-5366a844.js";import"./hasIn-bc278bbb.js";import"./_arrayIncludesWith-2f006ba6.js";import"./isMobile-12f0741d.js";import"./useRefs-d53d1c11.js";const Se={class:"invite-form-wrapper"},Te=g("br",null,null,-1),Ue={class:"title"},Z=W({__name:"GroupModalForm",setup(D,{expose:f}){const{t:l}=A(),{getWorkspaceId:p}=Y(),c=y({name:"",content:"",addUsers:[]}),k=y([]),x=async()=>{const{data:m}=await _e.getUserList(p);return m.workspaceUsers.content},T=m=>m.map(t=>({label:t==null?void 0:t.nickname,value:t==null?void 0:t.nickname,prefixImg:t==null?void 0:t.thumbnail.url,workspaceUserId:t==null?void 0:t.workspaceUserId}));return k.value.length||x().then(m=>{k.value=T(m)}).catch(m=>console.log(m)),f({getModalInfo:c.value}),(m,t)=>{const h=de;return I(),R(e(ge),null,{default:n(()=>[g("div",Se,[o(e(O),{value:c.value.name,"onUpdate:value":t[0]||(t[0]=_=>c.value.name=_),label:e(l)("page.manage.groupName")},null,8,["value","label"]),o(e(O),{value:c.value.content,"onUpdate:value":t[1]||(t[1]=_=>c.value.content=_),label:e(l)("page.manage.groupDescription")},null,8,["value","label"]),Te,g("h4",Ue,U(e(l)("page.manage.addUserToAGroup")),1),o(h,{modelValue:c.value.addUsers,"onUpdate:modelValue":t[2]||(t[2]=_=>c.value.addUsers=_),filterOption:!0,options:k.value,width:"100%"},null,8,["modelValue","options"])])]),_:1})}}});Z.__docgenInfo={exportName:"default",displayName:"GroupModalForm",description:"",tags:{},expose:[{name:"getModalInfo"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/GroupModalForm.vue"]};const Pe={class:"post-detail"},Re={style:{display:"flex",gap:"10px"}},$e={style:{display:"flex",gap:"10px"}},Be={class:"btn-wrapper"},ee=W({__name:"PostDetail",props:{data:{}},emits:["reload","close"],setup(D,{emit:f}){const l=D,{t:p}=A(),{Item:c}=q,{getWorkspaceId:k}=Y(),[x,T]=J.useModal(),m=N.R,t=y(m),h=te(()=>t.value===N.C||t.value===N.U),_=y(!1),w={Save:"Save",Delete:"Delete"},$={name:"",content:""},i=ae({post:$,clonePost:$});i.post={...l.data},i.clonePost=fe(l.data);const B=v=>{if(v===w.Save)return V.success(p("message.saveSuccess"),1);if(v===w.Delete)return V.success(p("message.deleteSuccess"),1)},E=()=>{_.value=!_.value},G=v=>{t.value=v},P=async()=>{const v={workspaceId:k,name:i.clonePost.name,content:i.clonePost.content};S.updateGroup(l.data.groupId,v).then(({success:s})=>{var a,r;s&&(M(),f("reload"),B(w.Save),i.post={...i.post,name:(a=i.clonePost)==null?void 0:a.name,content:(r=i.clonePost)==null?void 0:r.content})}).catch(s=>{console.log(s)})},M=()=>{G(m),E()},F=()=>{const v={groupId:[l.data.groupId]};S.removeGroup(k,v).then(({success:s})=>{s&&(f("reload"),f("close"),B(w.Delete))}).catch(s=>{console.log(s)})},L=()=>{x.confirm({title:p("message.modalDeleteCheck"),icon:se(Ie),okText:p("component.button.ok"),okType:"primary",cancelText:p("component.button.cancel"),onOk(){F()}})};return(v,s)=>{const a=ve,r=ye,C=ke,u=j;return I(),z("div",Pe,[h.value?(I(),R(e(q),{key:1,layout:"horizontal",model:i},{default:n(()=>[o(e(c),null,{default:n(()=>[o(e(O),{value:i.clonePost.name,"onUpdate:value":s[3]||(s[3]=d=>i.clonePost.name=d),label:e(p)("page.manage.groupTitle")},null,8,["value","label"])]),_:1}),o(e(c),null,{default:n(()=>[o(e(O),{value:i.clonePost.content,"onUpdate:value":s[4]||(s[4]=d=>i.clonePost.content=d),label:e(p)("page.manage.groupContent")},null,8,["value","label"])]),_:1}),g("div",Be,[o(u,{onClick:M},{default:n(()=>[o(e(De))]),_:1}),o(u,{onClick:P,type:"primary"},{default:n(()=>[o(e(we))]),_:1})])]),_:1},8,["model"])):(I(),R(e(q),{key:0,class:"post-detail-read",layout:"horizontal"},{default:n(()=>[g("div",null,[o(e(c),{label:e(p)("page.manage.groupTitle")},{default:n(()=>{var d;return[K(U(((d=i.post)==null?void 0:d.name)??"-"),1)]}),_:1},8,["label"]),o(e(c),{label:e(p)("page.manage.groupContent")},{default:n(()=>{var d;return[K(U(((d=i.post)==null?void 0:d.content)??"-"),1)]}),_:1},8,["label"])]),o(C,{open:_.value,"onUpdate:open":s[2]||(s[2]=d=>_.value=d),trigger:["click"]},{overlay:n(()=>[o(r,null,{default:n(()=>[o(a,{key:"1",onClick:s[1]||(s[1]=d=>G(e(N).C))},{default:n(()=>[g("div",Re,[g("span",null,U(e(p)("common.postModify")),1)])]),_:1}),o(a,{key:"2",onClick:L},{default:n(()=>[g("div",$e,[g("span",null,U(e(p)("component.button.delete")),1)])]),_:1})]),_:1})]),default:n(()=>[g("a",{class:"ant-dropdown-link",onClick:s[0]||(s[0]=ne(()=>{},["prevent"]))},[o(e(be),{style:{"font-size":"18px"}})])]),_:1},8,["open"])]),_:1})),o(e(T))])}}});const Ge=X(ee,[["__scopeId","data-v-4b27da9c"]]);ee.__docgenInfo={exportName:"default",displayName:"PostDetail",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"intersection",elements:[{name:"PostType"},{name:"{ groupId: string }"}]}}],events:[{name:"reload"},{name:"close"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/components/PostDetail.vue"]};const Fe=()=>{const{t:D}=A();return[{title:`${D("page.manage.groupName")}`,dataIndex:"name",key:"name"},{title:`${D("page.manage.groupDescription")}`,dataIndex:"content",key:"content"},{title:`${D("common.createdAt")}`,dataIndex:"createdAt",key:"createdAt",customRender:({text:f})=>xe.unix(f).format("YYYY-MM-DD")},{title:`${D("common.status")}`,dataIndex:"status",key:"status",customRender:({value:f})=>f.label}]},Ne={class:"manage-group-container"},Oe={class:"detail-contents"},Ve={class:"tab-wrapper"},oe=W({__name:"index",setup(D){const f=y(),{t:l}=A(),p={Detail:{key:"Detail",title:l("common.detail"),component:Q(()=>H(()=>import("./GroupDetail-6c2c43f1.js"),["./GroupDetail-6c2c43f1.js","./vue.esm-bundler-06433f34.js","./index-2fe437c2.js","./_commonjsHelpers-de833af9.js","./index-6cf4e6ab.js","./vue-router-09c98cdc.js","./index-f9a7754c.js","./FilterForm-0cbd5abc.js","./index-fe2cee87.js","./_arrayLikeKeys-856a4a59.js","./compact-item-943b0817.js","./extends-98964cd2.js","./_overRest-fdd2e9e6.js","./isArrayLikeObject-18ce9678.js","./isPlainObject-7ca50782.js","./dayjs.min-bd65d405.js","./pinia-1c824524.js","./Accordion-0d466002.js","./index-c186720f.js","./FormItemContext-d5d2b6af.js","./statusUtils-981b964f.js","./vnode-0120d1ab.js","./CloseCircleFilled-0e0600c9.js","./index-9435a495.js","./index-aab19e1a.js","./index-df6759cb.js","./index-7bc94af2.js","./EyeOutlined-3dbe0b46.js","./index-30344dd3.js","./motion-8927e1f6.js","./_plugin-vue_export-helper-c27b6911.js","./index-0fc5836e.js","./index-9c7320cf.js","./KeyCode-5dbefdba.js","./colors-897f8409.js","./ClockCircleOutlined-ec564bb6.js","./useMergedState-9fc4af37.js","./slide-14b3f38e.js","./motionUtil-c773f409.js","./index-0b93d195.js","./pickAttrs-7c36c3e9.js","./isMobile-12f0741d.js","./shallowequal-aee54418.js","./roundedArrow-e2771650.js","./RightOutlined-811eef93.js","./firstNotUndefined-29a740f3.js","./collapseMotion-a3198536.js","./Accordion-0db05fe0.css","./Button-f7730f75.js","./Button-bb7a377a.css","./DropdownButton-c71d963a.js","./FilterForm-e51dbf9c.css","./_baseSet-597e192b.js","./_toKey-f8a2c48c.js","./isSymbol-4808126a.js","./vue-i18n.runtime-ed730321.js","./iframe-4d7f0ef5.js","./index-1bdfef9a.js","./InfoCircleOutlined-588a8397.js","./ExclamationCircleFilled-d404fa4e.js","./cloneDeep-63a05421.js","./index-d69220fe.js","./ListItemMeta-48975394.js","./index-2e1e68bc.js","./index-75e981cc.js","./LeftOutlined-2c031711.js","./eagerComputed-327a0c00.js","./responsiveObserve-dd206e94.js","./Col-5366a844.js","./useFlexGapSupport-b50d290f.js","./styleChecker-c17e3bbb.js","./ListItemMeta-7e334fa6.css","./SearchSelect-5f872db7.js","./SvgIcon-c1119032.js","./SvgIcon-c8f4c12a.css","./debounce-849adbc2.js","./SearchSelect-8d0a7f42.css","./index-9943d5fa.js","./index-20ecb033.js","./index-761f2d76.js","./index-8de211b8.js","./index-8194f8e1.js","./index-b8ebef0a.js","./_arrayIncludesWith-2f006ba6.js","./UserAddOutlined-b0b9d162.js","./MoreOutlined-7525bc43.js","./GroupDetail-ba53a7d0.css"],import.meta.url))},History:{key:"History",title:l("page.manage.history"),component:Q(()=>H(()=>import("./GroupTimeline-af94f67b.js"),["./GroupTimeline-af94f67b.js","./vue.esm-bundler-06433f34.js","./index-2fe437c2.js","./_commonjsHelpers-de833af9.js","./index-6cf4e6ab.js","./vue-router-09c98cdc.js","./index-f9a7754c.js","./FilterForm-0cbd5abc.js","./index-fe2cee87.js","./_arrayLikeKeys-856a4a59.js","./compact-item-943b0817.js","./extends-98964cd2.js","./_overRest-fdd2e9e6.js","./isArrayLikeObject-18ce9678.js","./isPlainObject-7ca50782.js","./dayjs.min-bd65d405.js","./pinia-1c824524.js","./Accordion-0d466002.js","./index-c186720f.js","./FormItemContext-d5d2b6af.js","./statusUtils-981b964f.js","./vnode-0120d1ab.js","./CloseCircleFilled-0e0600c9.js","./index-9435a495.js","./index-aab19e1a.js","./index-df6759cb.js","./index-7bc94af2.js","./EyeOutlined-3dbe0b46.js","./index-30344dd3.js","./motion-8927e1f6.js","./_plugin-vue_export-helper-c27b6911.js","./index-0fc5836e.js","./index-9c7320cf.js","./KeyCode-5dbefdba.js","./colors-897f8409.js","./ClockCircleOutlined-ec564bb6.js","./useMergedState-9fc4af37.js","./slide-14b3f38e.js","./motionUtil-c773f409.js","./index-0b93d195.js","./pickAttrs-7c36c3e9.js","./isMobile-12f0741d.js","./shallowequal-aee54418.js","./roundedArrow-e2771650.js","./RightOutlined-811eef93.js","./firstNotUndefined-29a740f3.js","./collapseMotion-a3198536.js","./Accordion-0db05fe0.css","./Button-f7730f75.js","./Button-bb7a377a.css","./DropdownButton-c71d963a.js","./FilterForm-e51dbf9c.css","./_baseSet-597e192b.js","./_toKey-f8a2c48c.js","./isSymbol-4808126a.js","./vue-i18n.runtime-ed730321.js","./iframe-4d7f0ef5.js","./index-1bdfef9a.js","./InfoCircleOutlined-588a8397.js","./ExclamationCircleFilled-d404fa4e.js","./cloneDeep-63a05421.js","./index-d69220fe.js","./index-17b6ca45.js","./index-e64babe4.js","./index-d60115d6.css","./GroupTimeline-aac98a16.css"],import.meta.url))}},c=y(!1),k=y(p.Detail.key),x=y(!1),T=y(),m=y(),t=y(),{getWorkspaceId:h}=Y(),_=a=>{c.value=a},w=()=>{x.value=!x.value},$=()=>{k.value=p.Detail.key},i=async a=>await S.getGroupList(h,a),B=({posts:a})=>a,E=()=>S.getPageInfo(),G=()=>S.getSortableCodes(),P=()=>{var a;(a=f.value)==null||a.reload({isReset:!0})},M={Save:"Save",Delete:"Delete"},F=a=>{if(a===M.Save)return V.success(l("message.saveSuccess"),1);if(a===M.Delete)return V.success(l("message.deleteSuccess"),1)},L=a=>{m.value=a,_(!0),$()},v=async()=>{var a;try{const r=(a=t.value)==null?void 0:a.getModalInfo,C={...r,workspaceId:h,addUsers:r.addUsers.map(u=>({workspaceUserId:u.workspaceUserId,nickname:u.label}))};await S.createGroup(C).then(({success:u})=>{u&&(F(M.Save),P(),w())}).catch(u=>{console.log(u)})}catch(r){console.log(r)}},s=(a,r)=>{J.confirm({content:l("message.modalDeleteCheck"),icon:o(Ce),onOk(){const C={groupId:r};S.removeGroup(h,C).then(({success:u})=>{u&&(P(),setTimeout(()=>{F(M.Delete)},300))}).catch(u=>console.log(u))}})};return(a,r)=>{const C=j,u=he,d=Me;return I(),z("div",Ne,[o(e(me),{ref_key:"dynamicTableRef",ref:f,openDetail:c.value,"onUpdate:openDetail":r[2]||(r[2]=b=>c.value=b),"row-key":"groupId",columns:e(Fe)(),"data-request":i,"column-request":G,"filter-request":E,"data-callback":B,showRegist:!1,phText:a.$t("component.ph.groupSearchPh"),onRowClick:L,onRowDelete:s},{tableBtns:n(()=>[o(C,{label:e(l)("component.button.registration"),size:"middle",onClick:w},{icon:n(()=>[o(e(ce))]),_:1},8,["label"])]),"detail-title":n(()=>[g("span",null,U(e(l)("common.postRead")),1)]),"detail-content":n(()=>[g("div",Oe,[g("div",Ve,[o(Ge,{data:m.value,onReload:P,onClose:r[0]||(r[0]=b=>_(!1))},null,8,["data"]),o(d,{"active-key":k.value,"onUpdate:activeKey":r[1]||(r[1]=b=>k.value=b),destroyInactiveTabPane:!0,tabBarGutter:70,tabBarStyle:{padding:"0 10%",display:"flex"}},{default:n(()=>[(I(),z(re,null,le(p,(b,Ae)=>o(u,{key:b.key,tab:b.title},{default:n(()=>[(I(),R(pe(b.component),{groupId:m.value.groupId},null,8,["groupId"]))]),_:2},1032,["tab"])),64))]),_:1},8,["active-key"])])])]),_:1},8,["openDetail","columns","phText"]),x.value?(I(),R(e(ue),{key:0,title:e(l)("page.manage.addUserToAGroup"),okBtnText:e(l)("component.button.save"),cancelBtnText:e(l)("component.button.cancel"),onCancel:w,onOk:v,class:"invite-modal"},{body:n(()=>[o(Z,{ref_key:"modalRef",ref:t,modelValue:T.value,"onUpdate:modelValue":r[3]||(r[3]=b=>T.value=b)},null,8,["modelValue"])]),_:1},8,["title","okBtnText","cancelBtnText"])):ie("",!0)])}}});const Rt=X(oe,[["__scopeId","data-v-4d59de12"]]);oe.__docgenInfo={exportName:"default",displayName:"manage-group",description:"",tags:{},sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/views/manage/manage-group/index.vue"]};export{Rt as default};
