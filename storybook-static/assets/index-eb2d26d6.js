import{_ as f}from"./extends-98964cd2.js";import{n as le,Z as J,u as Pe,y as Fe,c as H,_ as x,O as W,$ as we,P as N,J as A,I as q,a0 as ae,a1 as Be,R as Oe,a2 as Ne,a3 as Se}from"./index-31244240.js";import{d as R,f as u,F as Ae,s as T,a1 as re,o as Ie,aa as G,e as K,w as ee,x as $e,H as Me}from"./vue.esm-bundler-da3dfd31.js";import{u as Re,D as Ee}from"./index-6b6b6228.js";import{C as je}from"./KeyCode-9b05785e.js";import{c as De}from"./styleChecker-86e19025.js";import{E as Le,C as ze}from"./ExclamationCircleFilled-da22edd1.js";import{C as He}from"./pickAttrs-d6f9a41a.js";import{I as We,g as _e,C as Qe,a as Ve}from"./index-9fe1cf39.js";var qe=globalThis&&globalThis.__rest||function(e,a){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,n=Object.getOwnPropertySymbols(e);d<n.length;d++)a.indexOf(n[d])<0&&Object.prototype.propertyIsEnumerable.call(e,n[d])&&(l[n[d]]=e[n[d]]);return l};let U;const Ke=e=>{U={x:e.pageX,y:e.pageY},setTimeout(()=>U=null,100)};De()&&we(document.documentElement,"click",Ke,!0);const Ue=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:N.any,closable:{type:Boolean,default:void 0},closeIcon:N.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:N.any,okText:N.any,okType:String,cancelText:N.any,icon:N.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:A(),cancelButtonProps:A(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:A(),maskStyle:A(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:A()}),k=R({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:le(Ue(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,a){let{emit:l,slots:n,attrs:d}=a;const[r]=J("Modal"),{prefixCls:C,rootPrefixCls:p,direction:g,getPopupContainer:i}=Pe("modal",e),[c,o]=Re(C);Fe(e.visible===void 0);const s=y=>{l("update:visible",!1),l("update:open",!1),l("cancel",y),l("change",!1)},t=y=>{l("ok",y)},m=()=>{var y,b;const{okText:I=(y=n.okText)===null||y===void 0?void 0:y.call(n),okType:P,cancelText:v=(b=n.cancelText)===null||b===void 0?void 0:b.call(n),confirmLoading:h}=e;return u(Ae,null,[u(q,x({onClick:s},e.cancelButtonProps),{default:()=>[v||r.value.cancelText]}),u(q,x(x({},ae(P)),{},{loading:h,onClick:t},e.okButtonProps),{default:()=>[I||r.value.okText]})])};return()=>{var y,b;const{prefixCls:I,visible:P,open:v,wrapClassName:h,centered:F,getContainer:B,closeIcon:O=(y=n.closeIcon)===null||y===void 0?void 0:y.call(n),focusTriggerAfterClose:j=!0}=e,D=qe(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),_=H(h,{[`${C.value}-centered`]:!!F,[`${C.value}-wrap-rtl`]:g.value==="rtl"});return c(u(Ee,x(x(x({},D),d),{},{rootClassName:o.value,class:H(o.value,d.class),getContainer:B||(i==null?void 0:i.value),prefixCls:C.value,wrapClassName:_,visible:v??P,onClose:s,focusTriggerAfterClose:j,transitionName:W(p.value,"zoom",e.transitionName),maskTransitionName:W(p.value,"fade",e.maskTransitionName),mousePosition:(b=D.mousePosition)!==null&&b!==void 0?b:U}),f(f({},n),{footer:n.footer||m,closeIcon:()=>u("span",{class:`${C.value}-close-x`},[O||u(je,{class:`${C.value}-close-icon`},null)])})))}}}),Je=()=>{const e=T(!1);return re(()=>{e.value=!0}),e},Xe=Je,Ye={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:A(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function ne(e){return!!(e&&e.then)}const oe=R({compatConfig:{MODE:3},name:"ActionButton",props:Ye,setup(e,a){let{slots:l}=a;const n=T(!1),d=T(),r=T(!1);let C;const p=Xe();Ie(()=>{e.autofocus&&(C=setTimeout(()=>{var o,s;return(s=(o=Be(d.value))===null||o===void 0?void 0:o.focus)===null||s===void 0?void 0:s.call(o)}))}),re(()=>{clearTimeout(C)});const g=function(){for(var o,s=arguments.length,t=new Array(s),m=0;m<s;m++)t[m]=arguments[m];(o=e.close)===null||o===void 0||o.call(e,...t)},i=o=>{ne(o)&&(r.value=!0,o.then(function(){p.value||(r.value=!1),g(...arguments),n.value=!1},s=>(p.value||(r.value=!1),n.value=!1,Promise.reject(s))))},c=o=>{const{actionFn:s}=e;if(n.value)return;if(n.value=!0,!s){g();return}let t;if(e.emitEvent){if(t=s(o),e.quitOnNullishReturnValue&&!ne(t)){n.value=!1,g(o);return}}else if(s.length)t=s(e.close),n.value=!1;else if(t=s(),!t){g();return}i(t)};return()=>{const{type:o,prefixCls:s,buttonProps:t}=e;return u(q,x(x(x({},ae(o)),{},{onClick:c,loading:r.value,prefixCls:s},t),{},{ref:d}),l)}}});function S(e){return typeof e=="function"?e():e}const se=R({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,a){let{attrs:l}=a;const[n]=J("Modal");return()=>{const{icon:d,onCancel:r,onOk:C,close:p,okText:g,closable:i=!1,zIndex:c,afterClose:o,keyboard:s,centered:t,getContainer:m,maskStyle:y,okButtonProps:b,cancelButtonProps:I,okCancel:P,width:v=416,mask:h=!0,maskClosable:F=!1,type:B,open:O,title:j,content:D,direction:_,closeIcon:Ce,modalRender:ve,focusTriggerAfterClose:pe,rootPrefixCls:L,bodyStyle:ye,wrapClassName:ge,footer:X}=e;let $=d;if(!d&&d!==null)switch(B){case"info":$=u(We,null,null);break;case"success":$=u(ze,null,null);break;case"error":$=u(He,null,null);break;default:$=u(Le,null,null)}const xe=e.okType||"primary",Q=e.prefixCls||"ant-modal",M=`${Q}-confirm`,be=l.style||{},Y=P??B==="confirm",Z=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",z=`${Q}-confirm`,ke=H(z,`${z}-${e.type}`,{[`${z}-rtl`]:_==="rtl"},l.class),V=n.value,Te=Y&&u(oe,{actionFn:r,close:p,autofocus:Z==="cancel",buttonProps:I,prefixCls:`${L}-btn`},{default:()=>[S(e.cancelText)||V.cancelText]});return u(k,{prefixCls:Q,class:ke,wrapClassName:H({[`${z}-centered`]:!!t},ge),onCancel:he=>p==null?void 0:p({triggerCancel:!0},he),open:O,title:"",footer:"",transitionName:W(L,"zoom",e.transitionName),maskTransitionName:W(L,"fade",e.maskTransitionName),mask:h,maskClosable:F,maskStyle:y,style:be,bodyStyle:ye,width:v,zIndex:c,afterClose:o,keyboard:s,centered:t,getContainer:m,closable:i,closeIcon:Ce,modalRender:ve,focusTriggerAfterClose:pe},{default:()=>[u("div",{class:`${M}-body-wrapper`},[u("div",{class:`${M}-body`},[S($),j===void 0?null:u("span",{class:`${M}-title`},[S(j)]),u("div",{class:`${M}-content`},[S(D)])]),X!==void 0?S(X):u("div",{class:`${M}-btns`},[Te,u(oe,{type:xe,actionFn:C,close:p,autofocus:Z==="ok",buttonProps:b,prefixCls:`${L}-btn`},{default:()=>[S(g)||(Y?V.okText:V.justOkText)]})])])]})}}}),Ze=[],w=Ze,Ge=e=>{const a=document.createDocumentFragment();let l=f(f({},Oe(e,["parentContext","appContext"])),{close:r,open:!0}),n=null;function d(){n&&(G(null,a),n.component.update(),n=null);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];const s=c.some(t=>t&&t.triggerCancel);e.onCancel&&s&&e.onCancel(()=>{},...c.slice(1));for(let t=0;t<w.length;t++)if(w[t]===r){w.splice(t,1);break}}function r(){for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];l=f(f({},l),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),d.apply(this,c)}}),l.visible&&delete l.visible,C(l)}function C(i){typeof i=="function"?l=i(l):l=f(f({},l),i),n&&(f(n.component.props,l),n.component.update())}const p=i=>{const c=Ve,o=c.prefixCls,s=i.prefixCls||`${o}-modal`,t=c.iconPrefixCls,m=_e();return u(Qe,x(x({},c),{},{prefixCls:o}),{default:()=>[u(se,x(x({},i),{},{rootPrefixCls:o,prefixCls:s,iconPrefixCls:t,locale:m,cancelText:i.cancelText||m.cancelText}),null)]})};function g(i){const c=u(p,f({},i));return c.appContext=e.parentContext||e.appContext||c.appContext,G(c,a),c}return n=g(l),w.push(r),{destroy:r,update:C}},E=Ge;function ie(e){return f(f({},e),{type:"warning"})}function ce(e){return f(f({},e),{type:"info"})}function ue(e){return f(f({},e),{type:"success"})}function fe(e){return f(f({},e),{type:"error"})}function de(e){return f(f({},e),{type:"confirm"})}const en=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),nn=R({name:"HookModal",inheritAttrs:!1,props:le(en(),{config:{width:520,okType:"primary"}}),setup(e,a){let{expose:l}=a;var n;const d=K(()=>e.open),r=K(()=>e.config),{direction:C,getPrefixCls:p}=Ne(),g=p("modal"),i=p(),c=()=>{var m,y;e==null||e.afterClose(),(y=(m=r.value).afterClose)===null||y===void 0||y.call(m)},o=function(){e.destroyAction(...arguments)};l({destroy:o});const s=(n=r.value.okCancel)!==null&&n!==void 0?n:r.value.type==="confirm",[t]=J("Modal",Se.Modal);return()=>u(se,x(x({prefixCls:g,rootPrefixCls:i},r.value),{},{close:o,open:d.value,afterClose:c,okText:r.value.okText||(s?t==null?void 0:t.value.okText:t==null?void 0:t.value.justOkText),direction:r.value.direction||C.value,cancelText:r.value.cancelText||(t==null?void 0:t.value.cancelText)}),null)}});let te=0;const on=R({name:"ElementsHolder",inheritAttrs:!1,setup(e,a){let{expose:l}=a;const n=T([]);return l({addModal:r=>(n.value.push(r),n.value=n.value.slice(),()=>{n.value=n.value.filter(C=>C!==r)})}),()=>n.value.map(r=>r())}});function tn(){const e=T(null),a=T([]);ee(a,()=>{a.value.length&&([...a.value].forEach(C=>{C()}),a.value=[])},{immediate:!0});const l=r=>function(p){var g;te+=1;const i=T(!0),c=T(null),o=T($e(p)),s=T({});ee(()=>p,v=>{b(f(f({},Me(v)?v.value:v),s.value))});const t=function(){i.value=!1;for(var v=arguments.length,h=new Array(v),F=0;F<v;F++)h[F]=arguments[F];const B=h.some(O=>O&&O.triggerCancel);o.value.onCancel&&B&&o.value.onCancel(()=>{},...h.slice(1))};let m;const y=()=>u(nn,{key:`modal-${te}`,config:r(o.value),ref:c,open:i.value,destroyAction:t,afterClose:()=>{m==null||m()}},null);m=(g=e.value)===null||g===void 0?void 0:g.addModal(y),m&&w.push(m);const b=v=>{o.value=f(f({},o.value),v)};return{destroy:()=>{c.value?t():a.value=[...a.value,t]},update:v=>{s.value=v,c.value?b(v):a.value=[...a.value,()=>b(v)]}}},n=K(()=>({info:l(ce),success:l(ue),error:l(fe),warning:l(ie),confirm:l(de)})),d=Symbol("modalHolderKey");return[n.value,()=>u(on,{key:d,ref:e},null)]}function me(e){return E(ie(e))}k.useModal=tn;k.info=function(a){return E(ce(a))};k.success=function(a){return E(ue(a))};k.error=function(a){return E(fe(a))};k.warning=me;k.warn=me;k.confirm=function(a){return E(de(a))};k.destroyAll=function(){for(;w.length;){const a=w.pop();a&&a()}};k.install=function(e){return e.component(k.name,k),e};export{k as M};
