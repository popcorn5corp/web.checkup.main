import{n as m,b as _,d as D,w as q,u as n,f as J,A as Y,z as T,F as B,_ as L,B as F,R as g,y as d,O as h,S as ie,ad as ce,M as C,U as V,V as ue,Q as de,X as z}from"./vue.esm-bundler-06433f34.js";import{_ as I,D as me}from"./Button-f7730f75.js";import"./DropdownButton-c71d963a.js";import{F as pe}from"./FilterForm-0cbd5abc.js";import"./SvgIcon-c1119032.js";import{T as fe}from"./BasicTable-21da69d0.js";import{a as ve}from"./useTour-42456f6d.js";import{u as we,c as be}from"./Accordion-0d466002.js";import{c as U}from"./cloneDeep-63a05421.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{A}from"./compact-item-943b0817.js";import{_ as Q}from"./index-d2655575.js";import{u as ye}from"./vue-i18n.runtime-ed730321.js";import{_ as ge}from"./index-97432be2.js";var he={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:t}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:e}}]}},name:"delete",theme:"twotone"};const Te=he;function W(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),l.forEach(function(r){_e(o,r,t[r])})}return o}function _e(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var H=function(e,t){var l=W({},e,t.attrs);return m(A,W({},l,{icon:Te}),null)};H.displayName="DeleteTwoTone";H.inheritAttrs=!1;const Ce=H;var Fe={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M420.6 798h182.9V642H420.6zM411 561.4l9.5 16.6h183l9.5-16.6L811.3 226H212.7z",fill:t}},{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.5 798H420.6V642h182.9v156zm9.5-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z",fill:e}}]}},name:"filter",theme:"twotone"};const De=Fe;function X(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),l.forEach(function(r){ke(o,r,t[r])})}return o}function ke(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var j=function(e,t){var l=X({},e,t.attrs);return m(A,X({},l,{icon:De}),null)};j.displayName="FilterTwoTone";j.inheritAttrs=!1;const Re=j;var Ie={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z",fill:t}},{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:e}}]}},name:"plus-circle",theme:"twotone"};const xe=Ie;function G(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),l.forEach(function(r){Pe(o,r,t[r])})}return o}function Pe(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var N=function(e,t){var l=G({},e,t.attrs);return m(A,G({},l,{icon:xe}),null)};N.displayName="PlusCircleTwoTone";N.inheritAttrs=!1;const Oe=N;function Se(o){const e=_([]),t=_([]),l=D(()=>n(e));let r=0;q(()=>n(o),async({filterRequest:u,filters:s})=>{if(!r){let i=[],v=[];if(s&&s.length&&(i=s),u)try{const{data:p,success:y}=await u();y&&(i=p.filters)}catch(p){console.log(p)}v=n(i).sort((p,y)=>p.order-y.order).map((p,y)=>{const{type:P,options:O,selectedItems:$}=p,k=P==="Radio"?O?[O[0]]:[]:$||[];return{...p,index:y,open:!0,options:O||[],selectedItems:k,removeAll:P==="RangeDatePicker"}}),e.value=v,t.value=U(n(e)),r++}},{immediate:!0});function x(u){const{index:s}=u;n(e)[s]={...u}}function f(){n(e).map(u=>{const{type:s,options:i}=u,v=s==="Radio"?[i[0]]:[];u.selectedItems=v})}function b(){e.value=U(n(t))}return{getFilterFormItems:l,setFilterFormItem:x,clearSelectedItems:f,initFilterFormItems:b}}const Be={filterFormItems:[],selectedRows:[],activeFilter:!1},$e={class:"table-tags-container"},ze={key:0,class:"table-tag"},Ve=["onClick"],K=J({__name:"TableTags",props:{items:{}},setup(o){const e=o,t=we(),l=D(()=>e.items),r=D(()=>n(l).some(f=>f.selectedItems.length>0)),x=(f,b)=>{const{selectedItems:u,removeAll:s}=f,i={...f,selectedItems:s?[]:u.filter(v=>v.value!==b.value)};t.setFilterFormItem(i)};return(f,b)=>{const u=Y("font-awesome-icon");return d(),T("div",$e,[(d(!0),T(B,null,L(l.value,s=>(d(),T(B,{key:s.key},[(d(!0),T(B,null,L(s.selectedItems,(i,v)=>(d(),T(B,{key:v},[i.value!==null?(d(),T("span",ze,[h("span",null,ie(i.label),1),h("span",{onClick:p=>x(s,i)},[m(u,{icon:["fas","xmark"]})],8,Ve)])):g("",!0)],64))),128))],64))),128)),r.value?(d(),F(n(I),{key:0,class:"table-tag",label:f.$t("component.button.reset"),onClick:b[0]||(b[0]=s=>n(t).clearSelectedItems())},null,8,["label"])):g("",!0)])}}});const qe=Z(K,[["__scopeId","data-v-afc329c3"]]);K.__docgenInfo={exportName:"default",displayName:"TableTags",description:"",tags:{},props:[{name:"items",required:!0,type:{name:"Array",elements:[{name:"FilterFormItem"}]}}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/components/dynamic-table/src/components/TableTags.vue"]};const Ae={class:"dynamic-table-wrapper"},He={class:"header"},je={class:"table-btns"},Ne={class:"body"},Ee={class:"title"},Me={class:"detail-content"},ee=J({__name:"DynamicTable",props:{filters:{default:()=>[]},openDetail:{type:Boolean},showRegist:{type:Boolean,default:!0},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},phText:{},deleteBtnText:{},filterRequest:{},contentCallback:{},cardContentCallback:{},dataSource:{},columns:{},loading:{type:Boolean},total:{},size:{},options:{},pagination:{},rowKey:{},initParam:{},layoutType:{},showToolbar:{type:Boolean,default:!0},toolbarOptions:{},dataRequest:{},columnRequest:{},dataCallback:{},dropdownPrefixCls:{},bordered:{type:Boolean},locale:{},onChange:{},onResizeColumn:{},rowSelection:{},getPopupContainer:{},scroll:{},sortDirections:{},showSorterTooltip:{type:[Boolean,Object]},prefixCls:{},tableLayout:{},rowClassName:{},title:{},footer:{},id:{},showHeader:{type:Boolean},components:{},customRow:{},customHeaderRow:{},direction:{},expandFixed:{type:[String,Boolean]},expandColumnWidth:{},expandedRowKeys:{},defaultExpandedRowKeys:{},expandedRowRender:{},expandRowByClick:{type:Boolean},expandIcon:{},onExpand:{},onExpandedRowsChange:{},defaultExpandAllRows:{type:Boolean},indentSize:{},expandIconColumnIndex:{},showExpandColumn:{type:Boolean},expandedRowClassName:{},childrenColumnName:{},rowExpandable:{},sticky:{type:[Boolean,Object]},transformCellText:{}},emits:["row-click","change","search","row-add","row-select","row-delete","update:openDetail"],setup(o,{expose:e,emit:t}){const l=o;e({reload:a=>{var c;(c=s.value)==null||c.getDataSource(a)}});const r=ve(),x=ce(),{t:f}=ye(),b=_(null),u=_(),s=_(),i=_(!1),v=_(!!(l.filters&&l.filters.length||l.filterRequest)),p=D(()=>({delete:l.deleteBtnText||f("component.button.delete"),download:f("component.button.download"),registration:f("component.button.registration"),filter:f("component.button.filter")})),y=_({...Be}),P=D(()=>({...l,...n(u)}));function O(a){u.value={...n(u),...a}}const $=D(()=>({...n(y)}));function k(a){y.value={...n(y),...a}}const{getFilterFormItems:S,clearSelectedItems:te,setFilterFormItem:ne,initFilterFormItems:oe}=Se(P);q(()=>{var a;return(a=n(s))==null?void 0:a.selectedRows},a=>{k({selectedRows:a})}),q(n(S),a=>{k({filterFormItems:a})},{immediate:!0,deep:!0});function ae(){var a;t("update:openDetail",!1),(a=n(s))==null||a.initCustomRow()}let le={setProps:O,setContextValues:k,getFilterFormItems:()=>n(S),setFilterFormItem:ne,clearSelectedItems:te,initFilterFormItems:oe,closeDetail:()=>{t("update:openDetail",!1)},closeFilter:()=>{n(i)&&(i.value=!1)},emitter:t};const re=D(()=>({...x,...n(P)}));return k({activeFilter:n(v)}),be({wrapRef:b,...le,getContextValues:$,getBindValues:re}),(a,c)=>{const se=Y("font-awesome-icon");return d(),T("div",{ref_key:"wrapRef",ref:b,class:"dynamic-table-containter"},[h("div",Ae,[h("div",He,[m(qe,{items:n(S)},null,8,["items"]),h("div",je,[m(n(ge),null,{default:C(()=>{var w;return[((w=$.value.selectedRows)==null?void 0:w.length)>0?(d(),T(B,{key:0},[a.showDownload?(d(),F(n(I),{key:0,label:p.value.download,size:"middle"},{icon:C(()=>[m(n(me))]),_:1},8,["label"])):g("",!0),a.showDelete?(d(),F(n(I),{key:1,label:p.value.delete,size:"middle",onClick:c[0]||(c[0]=R=>{var E,M;return a.$emit("row-delete",(E=s.value)==null?void 0:E.selectedRows,(M=s.value)==null?void 0:M.selectedRowKeys)})},{icon:C(()=>[m(n(Ce))]),_:1},8,["label"])):g("",!0)],64)):g("",!0),z(a.$slots,"tableBtns",{},void 0,!0),a.showRegist?(d(),F(n(I),{key:1,ref:R=>n(r).setTour(3,R),label:p.value.registration,size:"middle",onClick:c[1]||(c[1]=R=>a.$emit("row-add"))},{icon:C(()=>[m(n(Oe))]),_:1},8,["label"])):g("",!0),v.value?(d(),F(n(I),{key:2,ref:R=>n(r).setTour(4,R),type:"primary",label:p.value.filter,size:"middle",onClick:c[2]||(c[2]=R=>i.value=!i.value)},{icon:C(()=>[m(n(Re))]),_:1},8,["label"])):g("",!0)]}),_:3})])]),m(n(Q)),h("div",Ne,[h("div",{class:"content",style:V({width:l.showToolbar&&i.value||a.openDetail?"70%":"100%"})},[m(n(fe),ue({ref_key:"tableRef",ref:s},{...l},{onRowAdd:c[3]||(c[3]=w=>a.$emit("row-add",w)),onRowClick:c[4]||(c[4]=w=>a.$emit("row-click",w)),onRowSelect:c[5]||(c[5]=w=>a.$emit("row-select",w))}),{default:C(()=>[z(a.$slots,"default",{},void 0,!0)]),_:3},16)],4),(d(),F(de,null,[i.value&&!a.openDetail?(d(),F(n(pe),{key:0,items:n(S),onClose:c[6]||(c[6]=w=>i.value=w),style:V({width:l.showToolbar&&i.value&&!a.openDetail?"30%":""})},null,8,["items","style"])):g("",!0)],1024)),a.openDetail?(d(),T("div",{key:0,class:"detail-wrapper",style:V({width:a.openDetail?"30%":""})},[h("div",Ee,[z(a.$slots,"detail-title",{},void 0,!0),m(n(I),{size:"small",onClick:ae,style:{float:"right"}},{icon:C(()=>[m(se,{class:"xmark",icon:["fas","xmark"]})]),_:1})]),m(n(Q)),h("div",Me,[z(a.$slots,"detail-content",{},void 0,!0)])],4)):g("",!0)])])],512)}}});const at=Z(ee,[["__scopeId","data-v-27e681bb"]]);ee.__docgenInfo={exportName:"default",displayName:"DynamicTable",description:"",tags:{},expose:[{name:"reload"}],props:[{name:"filters",description:"필터 목록 (filterRequest 대체 가능)",required:!1,type:{name:"FilterList"},defaultValue:{func:!1,value:"() => []"}},{name:"openDetail",description:"상세 영역 표출 여부 v-model",required:!1,type:{name:"boolean"}},{name:"showRegist",description:"등록 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDownload",description:"다운로드 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDelete",description:"삭제 버튼 노출 여부",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"phText",description:"검색창 Placeholder Text",required:!1,type:{name:"string"}},{name:"deleteBtnText",description:"삭제 버튼 텍스트",required:!1,type:{name:"string"}},{name:"filterRequest",description:"테이블 필터 정보에 대한 API",required:!1,type:{name:"TSFunctionType"}},{name:"contentCallback",description:"Request API에 대한 응답 Content 처리를 위한 Callback",tags:{params:[{title:"param",type:{name:"mixed"},name:"content"}]},required:!1,type:{name:"TSFunctionType"}},{name:"cardContentCallback",description:"Request API에 대한 응답 CardView 정보 대응을 위한 Content 처리 Callback",tags:{params:[{title:"param",type:{name:"mixed"},name:"content"}]},required:!1,type:{name:"TSFunctionType"}},{name:"showToolbar",defaultValue:{func:!1,value:"true"}}],events:[{name:"row-delete"},{name:"row-add"},{name:"row-click"},{name:"row-select"},{name:"change"},{name:"search"},{name:"update:openDetail"}],slots:[{name:"tableBtns"},{name:"default"},{name:"detail-title"},{name:"detail-content"}],sourceFiles:["/Users/kimnayoung/Documents/workspace/web.checkup.main/src/components/dynamic-table/src/DynamicTable.vue"]};export{at as D,Oe as P};
